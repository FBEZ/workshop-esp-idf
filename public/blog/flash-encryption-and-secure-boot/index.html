<!DOCTYPE html>
<html lang="en" dir="ltr"
  class="scroll-smooth"
  data-default-appearance="light"
  data-auto-appearance="false"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="en" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>Using the ESP Flash Download Tool to finish the Flash Encryption &#43; Secure Boot &#43; NVS Encryption &middot; Developer Portal</title>
  <meta name="title" content="Using the ESP Flash Download Tool to finish the Flash Encryption &#43; Secure Boot &#43; NVS Encryption &middot; Developer Portal" />
  
  <meta name="description" content="The developer resources in just one place!" />
  <meta name="keywords" content="ESP32-S3, ESP-IDF, Flash Encryption, Secure Boot, NVS Encryption, " />
  
  
  <link rel="canonical" href="http://localhost:1313/blog/flash-encryption-and-secure-boot/" />
  
  
  
  
  
  
  
  
  
  
  
  
  

  <link type="text/css" rel="stylesheet" href="/css/main.bundle.min.07ac84810cad0ed08da8b416798009536fa2093f146cd2365bed74f9139c75a1a7fdbca3b4d77a97a90689aba4635d5467091cff70733f074b4356478b66bb9c.css"
    integrity="sha512-B6yEgQytDtCNqLQWeYAJU2&#43;iCT8UbNI2W&#43;10&#43;ROcdaGn/byjtNd6l6kGiaukY11UZwkc/3BzPwdLQ1ZHi2a7nA==" />
  
  
  <script type="text/javascript" src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.829f1a320d5c2d64e9e0220d20960155b426b094cfb2440e4938166a93f52805a398e64abc400353e7a0b8ea9cb75083d6dd5238a5d4a59fd0cd01008d407301.js"
    integrity="sha512-gp8aMg1cLWTp4CINIJYBVbQmsJTPskQOSTgWapP1KAWjmOZKvEADU&#43;eguOqct1CD1t1SOKXUpZ/QzQEAjUBzAQ==" data-copy="" data-copied=""></script>
  
  
  
  <script src="/lib/zoom/zoom.min.f592a181a15d2a5b042daa7f746c3721acf9063f8b6acd175d989129865a37d400ae0e85b640f9ad42cd98d1f8ad30931718cf8811abdcc5fcb264400d1a2b0c.js" integrity="sha512-9ZKhgaFdKlsELap/dGw3Iaz5Bj&#43;Las0XXZiRKYZaN9QArg6FtkD5rULNmNH4rTCTFxjPiBGr3MX8smRADRorDA=="></script>
  
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:url" content="http://localhost:1313/blog/flash-encryption-and-secure-boot/">
  <meta property="og:site_name" content="Developer Portal">
  <meta property="og:title" content="Using the ESP Flash Download Tool to finish the Flash Encryption &#43; Secure Boot &#43; NVS Encryption">
  <meta property="og:description" content="The developer resources in just one place!">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2024-09-23T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-09-23T00:00:00+00:00">
    <meta property="article:tag" content="ESP32-S3">
    <meta property="article:tag" content="ESP-IDF">
    <meta property="article:tag" content="Flash Encryption">
    <meta property="article:tag" content="Secure Boot">
    <meta property="article:tag" content="NVS Encryption">
    <meta property="og:image" content="http://localhost:1313/blog/flash-encryption-and-secure-boot/featured.webp">

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/blog/flash-encryption-and-secure-boot/featured.webp">
  <meta name="twitter:title" content="Using the ESP Flash Download Tool to finish the Flash Encryption &#43; Secure Boot &#43; NVS Encryption">
  <meta name="twitter:description" content="The developer resources in just one place!">

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Blog",
    "name": "Using the ESP Flash Download Tool to finish the Flash Encryption \u002b Secure Boot \u002b NVS Encryption",
    "headline": "Using the ESP Flash Download Tool to finish the Flash Encryption \u002b Secure Boot \u002b NVS Encryption",
    
    
    "inLanguage": "en",
    "url" : "http:\/\/localhost:1313\/blog\/flash-encryption-and-secure-boot\/",
    "author" : {
      "@type": "Person",
      "name": "John Lee"
    },
    "copyrightYear": "2024",
    "dateCreated": "2024-09-23T00:00:00\u002b00:00",
    "datePublished": "2024-09-23T00:00:00\u002b00:00",
    
    "dateModified": "2024-09-23T00:00:00\u002b00:00",
    
    "keywords": ["ESP32-S3","ESP-IDF","Flash Encryption","Secure Boot","NVS Encryption"],
    
    "mainEntityOfPage": "true",
    "wordCount": "4582"
  }]
  </script>


  
  
  <meta name="author" content="John Lee" />
  
  
  
  <link href="https://www.linkedin.com/company/espressif-systems" rel="me" />
  
  
  <link href="https://twitter.com/EspressifSystem" rel="me" />
  
  
  <link href="https://www.instagram.com/espressif_systems_official" rel="me" />
  
  
  <link href="https://blog.espressif.com/" rel="me" />
  
  
  <link href="https://github.com/espressif" rel="me" />
  
  
  <link href="https://espressif.com/" rel="me" />
  
  
  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>






















  


  

  

  
  



  
  
  <meta name="theme-color"/>
  
  
  
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script>

    const firebaseConfig = {
      apiKey: "",
      authDomain: "",
      projectId: "",
      storageBucket: "",
      messagingSenderId: "",
      appId: "",
      measurementId: ""
    };

    var app = firebase.initializeApp(firebaseConfig);
    var db = firebase.firestore();
    var auth = firebase.auth();

  </script>
  
  
</head>
<body class="bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral">

    
    <div class="flex flex-col min-h-screen w-full max-w-7xl mx-auto px-6 sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">

      <div id="the-top" class="absolute flex self-center">
        <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
          href="#main-content">
          <span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content
        </a>
      </div>

      
      
      
      
        <div class="min-h-[148px]"></div>
<div class="fixed inset-x-0 pl-[24px] pr-[24px] bg-neutral dark:bg-neutral-800" style="z-index:100">
  <div class="relative max-w-[64rem] ml-auto mr-auto">
    <div style="padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px"
    class="main-menu flex flex-wrap items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3">

    
    
    
     

    <div>
        <a href="/" class="flex">
            <span class="sr-only">Developer Portal</span>

            <img src="/img/espressif_logo_contour.png"
                width="192"
                height="39.5"
                class="logo max-h-[0.625rem] max-w-[0.625rem] object-scale-down object-left nozoom"
                alt="Developer Portal" />
        </a>
    </div>
    

    <div class="flex flex-1 items-center justify-between w-full md:w-auto">
        <nav class="flex space-x-3">

            
            <a href="/" class="text-base font-medium text-gray-500 hover:text-gray-900">Developer Portal</a>
            

        </nav>
        <nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12">

            
            
            
  <a href="/blog/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="Blog">
        Blog
    </p>
</a>



            
            
  <a href="/workshops/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="Workshops">
        Workshops
    </p>
</a>



            
            
  <a href="/events/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="Events">
        Events
    </p>
</a>



            
             
  <div>
  <div class="cursor-pointer flex items-center nested-menu">
    
    <a  class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="">
      Products
    </a>
    <span>
      

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


    </span>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="/hardware/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="Hardware">
            Hardware
          </p>
        </a>
        
        <a href="/software/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="Software">
            Software
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
             
  <div>
  <div class="cursor-pointer flex items-center nested-menu">
    
    <a  class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="">
      Quick Links
    </a>
    <span>
      

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


    </span>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="https://espressif.com" 
          target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Espressif Site
          </p>
        </a>
        
        <a href="https://documentation.espressif.com/en/home" 
          target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Documents
          </p>
        </a>
        
        <a href="https://components.espressif.com/" 
          target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Component Registry
          </p>
        </a>
        
        <a href="https://devcon.espressif.com/" 
          target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            DevCon
          </p>
        </a>
        
        <a href="https://esp32.com" 
          target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            ESP32 Forum
          </p>
        </a>
        
        <a href="https://products.espressif.com/" 
          target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Product Selector
          </p>
        </a>
        
        <a href="https://www.reddit.com/r/esp32/" 
          target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Reddit
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
            

            


            
            <button id="search-button" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400 h-12"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            


            
            

        </nav>
    </div>

    <div class="w-full flex flex-wrap justify-between md:hidden mt-2 space-y-2">
        <div class="flex items-center space-x-5 ml-auto">

            


            
            <button id="search-button-mobile" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            

            
            

            <label id="menu-button" class="block">
                
                <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>

  </span>


                </div>
                <div id="menu-wrapper" style="padding-top:5px;"
                    class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
                    <ul
                        class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl menu-ul">

                        <li id="menu-close-button">
                            <span
                                class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400 menu-close">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


                            </span>
                        </li>

                        

                        
  <li class="mt-1">
    <a href="/blog/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="Blog">
            Blog
        </p>
    </a>
</li>




                        

                        
  <li class="mt-1">
    <a href="/workshops/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="Workshops">
            Workshops
        </p>
    </a>
</li>




                        

                        
  <li class="mt-1">
    <a href="/events/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="Events">
            Events
        </p>
    </a>
</li>




                        

                         
  <li class="mt-1">
    <a href="" class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            Products
        </p>
        <span>
            

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


        </span>
    </a>
</li>

<li class="mt-1">
    <a href="/hardware/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="Hardware">
            Hardware
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/software/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="Software">
            Software
        </p>
    </a>
</li>

<li class="mb-2"></li>




                        

                         
  <li class="mt-1">
    <a href="" class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            Quick Links
        </p>
        <span>
            

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


        </span>
    </a>
</li>

<li class="mt-1">
    <a href="https://espressif.com"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Espressif Site
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="https://documentation.espressif.com/en/home"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Documents
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="https://components.espressif.com/"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Component Registry
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="https://devcon.espressif.com/"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            DevCon
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="https://esp32.com"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            ESP32 Forum
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="https://products.espressif.com/"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Product Selector
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="https://www.reddit.com/r/esp32/"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Reddit
        </p>
    </a>
</li>

<li class="mb-2"></li>




                        

                    </ul>
                    
                    

                </div>
            </label>
        </div>
    </div>
</div>




<script>
    (function () {
        var $mainmenu = $('.main-menu');
        var path = window.location.pathname;
        $mainmenu.find('a[href="' + path + '"]').each(function (i, e) {
            $(e).children('p').addClass('active');
        });
        
        document.querySelectorAll('#menu-wrapper .mt-1').forEach((parent) => {
            parent.style.width = '7rem';
            parent.style.textAlign = 'left';
            if (parent.querySelector('span') !== null) {
                parent.addEventListener("click", function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const root = document.querySelector('#menu-wrapper');
                    root.style.display = 'block';
                    if (this.classList.contains('menu-show')) {
                        this.classList.remove('menu-show');
                    } else {
                        this.classList.add('menu-show');
                    }
                    
                    var nextLiElements = [];
                    var nextSibling = this.nextSibling;
                    while (nextSibling) {
                        if (nextSibling.nodeType === 1 && nextSibling.classList.contains('mb-2')) {
                            break;
                        }
                        if (nextSibling.nodeType === 1 && nextSibling.tagName.toLowerCase() === 'li') {
                            nextLiElements.push(nextSibling);
                        }
                        nextSibling = nextSibling.nextSibling;
                    }

                    nextLiElements.forEach(function(nextLi) {
                        nextLi.style.display = parent.classList.contains('menu-show') ? 'block' : 'none'
                    });
                })
            }
            if (parent.querySelector('a')?.querySelector('p.text-sm')) {
                parent.style.display = 'none';
            }
        });
        document.querySelectorAll('#menu-wrapper .mb-2').forEach((node) => {
            node.style.display = 'none';
        });
    })();
</script>




  <link rel="stylesheet" href="http://localhost:1313/css/styles.css" integrity="">


  </div>
</div>

      

      <div class="relative flex flex-col grow">
        <main id="main-content" class="grow pb-[120px]">
          


<article>
  
  
  
  
  
  

        
            <div class="w-full h-36 md:h-56 lg:h-72 single_hero_basic nozoom" style="background-image:url(/blog/flash-encryption-and-secure-boot/featured_hu_7f346343d57d1b76.webp);"></div>
        
    
  
  

  <header id="single_header" class="mt-5 max-w-prose">
    
    <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
      Using the ESP Flash Download Tool to finish the Flash Encryption + Secure Boot + NVS Encryption
    </h1>
    <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
      





  
  







  







  











  



<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2024-09-23T00:00:00&#43;00:00">23 September 2024</time><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">22 mins</span><span class="px-2 text-primary-500">&middot;</span>


<script type="text/javascript" src="/js/zen-mode.min.2a0a1375509c03daf41c53a9831aa2d560895b7a2528c3eb3b56e7b11a135c7529e49727162a053b6193be8340270a8342f42c69f3d7e262ae54bc248eaac8f5.js" integrity="sha512-KgoTdVCcA9r0HFOpgxqi1WCJW3olKMPrO1bnsRoTXHUp5JcnFioFO2GTvoNAJwqDQvQsafPX4mKuVLwkjqrI9Q=="></script>

<span class="mb-[2px]">
    <span id="zen-mode-button"
          class="text-lg hover:text-primary-500"
          title="Enable zen mode"
          data-title-i18n-disable="Enable zen mode"
          data-title-i18n-enable="Disable zen mode">
        <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="50px" height="50px">
    <path fill="currentColor" d="M 12.980469 4 C 9.1204688 4 5.9804688 7.14 5.9804688 11 L 6 26 L 9.9804688 26 L 9.9804688 11 C 9.9804688 9.35 11.320469 8 12.980469 8 L 40.019531 8 C 41.679531 8 43.019531 9.35 43.019531 11 L 43.019531 39 C 43.019531 40.65 41.679531 42 40.019531 42 L 29 42 C 29 43.54 28.420938 44.94 27.460938 46 L 40.019531 46 C 43.879531 46 47.019531 42.86 47.019531 39 L 47.019531 11 C 47.019531 7.14 43.879531 4 40.019531 4 L 12.980469 4 z M 7 28 C 4.794 28 3 29.794 3 32 L 3 42 C 3 44.206 4.794 46 7 46 L 23 46 C 25.206 46 27 44.206 27 42 L 27 32 C 27 29.794 25.206 28 23 28 L 7 28 z M 7 32 L 23 32 L 23.001953 42 L 7 42 L 7 32 z"/>
</svg>
  </span>

</span>
    </span>
</span>
  

  
  
</div>





<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/esp32-s3/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    ESP32-S3
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/esp-idf/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    ESP-IDF
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/flash-encryption/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Flash Encryption
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/secure-boot/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Secure Boot
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/nvs-encryption/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    NVS Encryption
  </span>
</span>
  </span>
  
  
  
  
</div>







    </div>

    
    
    
    
    

    

    

      

    
      
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          

          
          
          
            
          

          
<div class="flex author author-extra mt-4">
  
      
      
        
          
        
        <img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width="96" height="96"
          src="/img/authors/espressif_hu_4b45c71394026494.png" />
      
  
  <div class="place-self-center">
    
    
    <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
      Author
    </div>
    <a  href="http://localhost:1313/authors/cai-guanhong/"  class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
      Cai Guanhong
    </a>
    
    
    <div class="text-sm text-neutral-700 dark:text-neutral-400">Espressif Systems</div>
    
    <div class="text-2xl sm:text-lg">
      <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
        
        
        <a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href="https://espressif.com/" target="_blank"
          aria-label="Link" rel="me noopener noreferrer"><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M172.5 131.1C228.1 75.51 320.5 75.51 376.1 131.1C426.1 181.1 433.5 260.8 392.4 318.3L391.3 319.9C381 334.2 361 337.6 346.7 327.3C332.3 317 328.9 297 339.2 282.7L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2C300.3 145.8 249.2 145.8 217.7 177.2L105.5 289.5C73.99 320.1 73.99 372 105.5 403.5C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4C265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2C188.1 505.3 110.2 498.7 60.21 448.8C3.741 392.3 3.741 300.7 60.21 244.3L172.5 131.1zM467.5 380C411 436.5 319.5 436.5 263 380C213 330 206.5 251.2 247.6 193.7L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7C307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8C339.7 366.2 390.8 366.2 422.3 334.8L534.5 222.5C566 191 566 139.1 534.5 108.5C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58C374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24C636.3 119.7 636.3 211.3 579.8 267.7L467.5 380z"/></svg>

  </span>

</span></a>
        
        
      </div>
    </div>
  </div>
</div>


      
      <div class="mb-5"></div>
      

    

  </header>

  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">

     <div
      class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8">
      <div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]">

         <details open class="toc-right mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#flash-encryption-overview">Flash Encryption Overview</a>
      <ul>
        <li><a href="#supported-socs">Supported SoCs</a></li>
      </ul>
    </li>
    <li><a href="#secure-boot-v2-overview">Secure Boot V2 Overview</a>
      <ul>
        <li><a href="#supported-socs-1">Supported SoCs</a></li>
      </ul>
    </li>
    <li><a href="#nvs-encryption-overview">NVS Encryption Overview</a></li>
    <li><a href="#step-by-step-guide">Step-by-step Guide</a>
      <ul>
        <li><a href="#1---create-a-partition-table-for-your-project">1 - Create a Partition Table for Your Project</a></li>
        <li><a href="#2---obtain-the-different-keys">2 - Obtain the different keys</a>
          <ul>
            <li><a href="#how-to-obtain-secure-boot-v2-key-">How to Obtain <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/host-based-security-workflows.html?highlight=secure_boot_signing_key%20pem#enable-secure-boot-v2-externally">Secure Boot V2</a> key ?</a></li>
            <li><a href="#how-to-obtain-secure-boot-v2-public-key-digest">How to Obtain <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/host-based-security-workflows.html?highlight=secure_boot_signing_key%20pem#enable-secure-boot-v2-externally">Secure Boot V2</a> public key digest?</a></li>
            <li><a href="#how-to-obtain-nvs_key-">How to Obtain <code>nvs_key</code> ?</a></li>
            <li><a href="#how-to-use-nvs_key-to-encrypt-the-custom_nvscsv-file-">How to use <code>nvs_key</code> to encrypt the <code>custom_nvs.csv</code> file ?</a></li>
          </ul>
        </li>
        <li><a href="#3---software-configuration">3 - Software Configuration</a>
          <ul>
            <li><a href="#flash-encryption-modes">Flash Encryption Modes</a></li>
            <li><a href="#enable-nvs-encryption">Enable NVS Encryption</a></li>
            <li><a href="#increase-the-partition-table-offset">Increase the partition table offset</a></li>
            <li><a href="#build-the-project">Build the project</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#4---flash-download-tool-configuration">4 - Flash Download Tool Configuration</a>
      <ul>
        <li><a href="#restart-the-flash-download-tool">Restart the Flash Download Tool</a></li>
      </ul>
    </li>
    <li><a href="#import-all-firmware-to-be-downloaded">Import All Firmware to be Downloaded</a></li>
    <li><a href="#downloading-all-firmware">Downloading All Firmware</a></li>
    <li><a href="#running-the-firmware">Running the Firmware</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
    <li><a href="#references">References</a></li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#flash-encryption-overview">Flash Encryption Overview</a>
      <ul>
        <li><a href="#supported-socs">Supported SoCs</a></li>
      </ul>
    </li>
    <li><a href="#secure-boot-v2-overview">Secure Boot V2 Overview</a>
      <ul>
        <li><a href="#supported-socs-1">Supported SoCs</a></li>
      </ul>
    </li>
    <li><a href="#nvs-encryption-overview">NVS Encryption Overview</a></li>
    <li><a href="#step-by-step-guide">Step-by-step Guide</a>
      <ul>
        <li><a href="#1---create-a-partition-table-for-your-project">1 - Create a Partition Table for Your Project</a></li>
        <li><a href="#2---obtain-the-different-keys">2 - Obtain the different keys</a>
          <ul>
            <li><a href="#how-to-obtain-secure-boot-v2-key-">How to Obtain <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/host-based-security-workflows.html?highlight=secure_boot_signing_key%20pem#enable-secure-boot-v2-externally">Secure Boot V2</a> key ?</a></li>
            <li><a href="#how-to-obtain-secure-boot-v2-public-key-digest">How to Obtain <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/host-based-security-workflows.html?highlight=secure_boot_signing_key%20pem#enable-secure-boot-v2-externally">Secure Boot V2</a> public key digest?</a></li>
            <li><a href="#how-to-obtain-nvs_key-">How to Obtain <code>nvs_key</code> ?</a></li>
            <li><a href="#how-to-use-nvs_key-to-encrypt-the-custom_nvscsv-file-">How to use <code>nvs_key</code> to encrypt the <code>custom_nvs.csv</code> file ?</a></li>
          </ul>
        </li>
        <li><a href="#3---software-configuration">3 - Software Configuration</a>
          <ul>
            <li><a href="#flash-encryption-modes">Flash Encryption Modes</a></li>
            <li><a href="#enable-nvs-encryption">Enable NVS Encryption</a></li>
            <li><a href="#increase-the-partition-table-offset">Increase the partition table offset</a></li>
            <li><a href="#build-the-project">Build the project</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#4---flash-download-tool-configuration">4 - Flash Download Tool Configuration</a>
      <ul>
        <li><a href="#restart-the-flash-download-tool">Restart the Flash Download Tool</a></li>
      </ul>
    </li>
    <li><a href="#import-all-firmware-to-be-downloaded">Import All Firmware to be Downloaded</a></li>
    <li><a href="#downloading-all-firmware">Downloading All Firmware</a></li>
    <li><a href="#running-the-firmware">Running the Firmware</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
    <li><a href="#references">References</a></li>
  </ul>
</nav>
  </div>
</details>


<script>
  (function () {
    var $toc = $('#TableOfContents');
    if ($toc.length > 0) {
      var $window = $(window);

      function onScroll() {
        var currentScroll = $window.scrollTop();
        var h = $('.anchor');
        var id = "";
        h.each(function (i, e) {
          e = $(e);
          if (e.offset().top - $(window).height()/3 <= currentScroll) {
            id = e.attr('id');
          }
        });
        var active = $toc.find('a.active');
        if (active.length == 1 && active.eq(0).attr('href') == '#' + id) return true;

        active.each(function (i, e) {
          
            $(e).removeClass('active');
          
        });
        $toc.find('a[href="#' + id + '"]').addClass('active')
        $toc.find('a[href="#' + id + '"]').parentsUntil('#TableOfContents').each(function (i, e) {
          $(e).children('a').parents('ul').show();
        });
      }

      $window.on('scroll', onScroll);
      $(document).ready(function () {
        
        onScroll();
      });
    }
  })();
</script>

   </div>
      </div>
      

      <div class="min-w-0 min-h-0 max-w-fit">

        

        <div class="article-content max-w-prose mb-20">
          
<h2 class="relative group">Introduction 
    <div id="introduction" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#introduction" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>This tutorial is a step-by-step guide on how to set the &ldquo;<a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/flash-encryption.html#flash-encryption" target="_blank">Flash Encryption</a> plus the <a href="https://docs.espressif.com/projects/esp-idf/zh_CN/v5.2.1/esp32s3/security/secure-boot-v2.html#secure-boot-v2" target="_blank">Secure Boot V2</a> and <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-reference/storage/nvs_encryption.html#nvs-encryption" target="_blank">NVS Encryption</a>&rdquo; functions on the ESP32-S3 using the <a href="https://www.espressif.com/en/support/download/other-tools?keys=flash" target="_blank">Flash Download Tool</a>.</p>

<h2 class="relative group">Flash Encryption Overview 
    <div id="flash-encryption-overview" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#flash-encryption-overview" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/flash-encryption.html#flash-encryption" target="_blank">Flash Encryption</a> is a crucial security feature for ESP32 series products, designed to encrypt the firmware stored on the external Flash chip. This encryption protects the integrity and confidentiality of the firmware, safeguarding your application against unauthorized access, tampering, or reverse-engineering. Flash Encryption is especially important in scenarios where secure data transmission and firmware protection are essential.</p>
<p>For more detailed instructions and configuration steps, please refer to the official <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/" target="_blank">Flash Encryption User Guide</a></p>

<h3 class="relative group">Supported SoCs 
    <div id="supported-socs" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#supported-socs" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>Here is the list of SoCs that supports the <strong>Flash Encryption</strong> and the supported key types.</p>
<table>
  <thead>
      <tr>
          <th>Chip</th>
          <th>Supported Key Types</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32/security/flash-encryption.html#flash-encryption" target="_blank">ESP32</a></td>
          <td>XTS_AES_128</td>
      </tr>
      <tr>
          <td><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s2/security/flash-encryption.html#flash-encryption" target="_blank">ESP32-S2</a></td>
          <td>XTS_AES_128 &amp; XTS_AES_256</td>
      </tr>
      <tr>
          <td><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/flash-encryption.html#flash-encryption" target="_blank">ESP32-S3</a></td>
          <td>XTS_AES_128 &amp; XTS_AES_256</td>
      </tr>
      <tr>
          <td><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32c2/security/flash-encryption.html#flash-encryption" target="_blank">ESP32-C2</a></td>
          <td>SHA256   &amp; XTS_AES_128</td>
      </tr>
      <tr>
          <td><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32c3/security/flash-encryption.html#flash-encryption" target="_blank">ESP32-C3</a></td>
          <td>XTS_AES_128</td>
      </tr>
      <tr>
          <td><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32c6/security/flash-encryption.html#flash-encryption" target="_blank">ESP32-C6</a></td>
          <td>XTS_AES_128</td>
      </tr>
      <tr>
          <td><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32h2/security/flash-encryption.html#flash-encryption" target="_blank">ESP32-H2</a></td>
          <td>XTS_AES_128</td>
      </tr>
  </tbody>
</table>
<p>Each SoC in the ESP32 family uses a hardware-accelerated 256-bit AES-XTS encryption key to protect the data stored in external flash. These keys are securely stored in the One-Time Programmable (OTP) memory of the chip and are inaccessible from user applications.</p>
<blockquote>
<p><strong>Note:</strong> This guide will focus on the <strong>ESP32-S3</strong> and its Flash Encryption features, providing step-by-step instructions tailored for this SoC.</p></blockquote>

<h2 class="relative group">Secure Boot V2 Overview 
    <div id="secure-boot-v2-overview" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#secure-boot-v2-overview" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p><strong>Secure Boot V2</strong> is a security feature that ensures a device only runs authorized, signed code. It protects against unauthorized code execution by verifying the digital signature of each piece of software during the boot process. This prevents the execution of malicious or tampered firmware and helps maintain the integrity of the device.</p>
<p>For more detailed instructions and configuration steps, please refer to the official <a href="https://docs.espressif.com/projects/esp-idf/zh_CN/v5.2.1/esp32s3/security/secure-boot-v2.html#secure-boot-v2" target="_blank">Secure Boot V2 User Guide</a>.</p>

<h3 class="relative group">Supported SoCs 
    <div id="supported-socs-1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#supported-socs-1" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>Here is the list of SoCs that supports the <strong>Secure Boot V2</strong> and the supported version.</p>
<table>
  <thead>
      <tr>
          <th>Product</th>
          <th>Secure Boot Version</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>ESP32 ECO V3 and above versions</td>
          <td><a href="https://docs.espressif.com/projects/esp-idf/en/release-v5.1/esp32/security/secure-boot-v1.html#secure-boot" target="_blank">Secure Boot V1</a> &amp; <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32/security/secure-boot-v2.html#secure-boot-v2" target="_blank">Secure Boot V2</a> （ RSA-PSS ）</td>
      </tr>
      <tr>
          <td>ESP32-S2 All versions</td>
          <td><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s2/security/secure-boot-v2.html#secure-boot-v2" target="_blank">Secure Boot V2</a> （ RSA-PSS ）</td>
      </tr>
      <tr>
          <td>ESP32-S3 All versions</td>
          <td><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/secure-boot-v2.html#secure-boot-v2" target="_blank">Secure Boot V2</a> （ RSA-PSS ）</td>
      </tr>
      <tr>
          <td>ESP32-C2 All versions</td>
          <td><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32c2/security/secure-boot-v2.html#secure-boot-v2" target="_blank">Secure Boot V2</a> （ ECDSA ）</td>
      </tr>
      <tr>
          <td>ESP32-C3 ECO V3 and above versions</td>
          <td><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32c3/security/secure-boot-v2.html#secure-boot-v2" target="_blank">Secure Boot V2</a> （ RSA-PSS）</td>
      </tr>
      <tr>
          <td>ESP32-C6 All versions</td>
          <td><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32c6/security/secure-boot-v2.html#secure-boot-v2" target="_blank">Secure Boot V2</a> （RSA-PSS or ECDSA）</td>
      </tr>
      <tr>
          <td>ESP32-H2 All versions</td>
          <td><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32h2/security/secure-boot-v2.html#secure-boot-v2" target="_blank">Secure Boot V2</a> （RSA-PSS or ECDSA）</td>
      </tr>
  </tbody>
</table>

<h2 class="relative group">NVS Encryption Overview 
    <div id="nvs-encryption-overview" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#nvs-encryption-overview" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p><strong>NVS Encryption</strong> provides secure storage for sensitive data in the Non-Volatile Storage (NVS) system of ESP32 devices. It supports two primary encryption schemes: the <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-reference/storage/nvs_encryption.html#nvs-encryption-hmac-peripheral-based-scheme" target="_blank">HMAC Peripheral-Based Scheme</a> and the <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-reference/storage/nvs_encryption.html#nvs-encryption-flash-encryption-based-scheme" target="_blank">Flash Encryption-Based Scheme</a>. These schemes ensure that sensitive information, such as device credentials or user data, is encrypted before being written to flash memory.</p>
<p>For more detailed information, refer to the <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-reference/storage/nvs_encryption.html#nvs-encryption" target="_blank">NVS Encryption User Guide</a>.</p>
<p>In this guide, we will focus on the <strong>NVS Encryption</strong> that is based on the <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/flash-encryption.html#flash-encryption" target="_blank">Flash Encryption</a> scheme, which leverages the same mechanism used for securing firmware in the external flash.</p>

<h2 class="relative group">Step-by-step Guide 
    <div id="step-by-step-guide" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#step-by-step-guide" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>This guide will walk you through enabling Flash Encryption and Secure Boot V2 on the ESP32-S3, enhancing the security of your application.</p>
<blockquote>
<p><strong>Warning:</strong> Be careful when following this guide. Once you &ldquo;burn&rdquo; the eFuse, this operation <strong>cannot</strong> be reverted. eFuses are one-time programmable, and any changes made to them are permanent.</p></blockquote>

<h3 class="relative group">1 - Create a Partition Table for Your Project 
    <div id="1---create-a-partition-table-for-your-project" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1---create-a-partition-table-for-your-project" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>The Flash memory on a single ESP chip can store multiple applications and various types of data, including calibration data, filesystems, and parameter storage. To organize this effectively, it&rsquo;s necessary to create a partition table that defines how the Flash space will be allocated for your project. Proper partitioning ensures that your application has the necessary space for both code and data storage.</p>
<p>For detailed partition table instructions, please refer to the <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-guides/partition-tables.html#partition-tables" target="_blank">Partition Tables User Guide</a>.</p>
<p>In this guide, we&rsquo;ll use the following partition table setup:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp"># Name,   Type, SubType, Offset,   Size, Flags
</span></span></span><span class="line"><span class="cl"><span class="cp"># Note: if you have increased the bootloader size, make sure to update the offsets to avoid overlap
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="n">nvs</span><span class="p">,</span>      <span class="n">data</span><span class="p">,</span> <span class="n">nvs</span><span class="p">,</span> <span class="mh">0x10000</span> <span class="p">,</span> <span class="mh">0x4000</span> <span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="n">otadata</span><span class="p">,</span>  <span class="n">data</span><span class="p">,</span> <span class="n">ota</span><span class="p">,</span> <span class="mh">0x14000</span> <span class="p">,</span> <span class="mh">0x2000</span> <span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="n">phy_init</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">phy</span><span class="p">,</span> <span class="mh">0x16000</span> <span class="p">,</span> <span class="mh">0x1000</span> <span class="p">,</span> <span class="n">encrypted</span>
</span></span><span class="line"><span class="cl"><span class="n">factory</span><span class="p">,</span>  <span class="n">app</span><span class="p">,</span>  <span class="n">factory</span><span class="p">,</span> <span class="mh">0x20000</span> <span class="p">,</span> <span class="mi">1</span><span class="n">M</span> <span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="n">ota_0</span><span class="p">,</span>    <span class="n">app</span><span class="p">,</span>  <span class="n">ota_0</span><span class="p">,</span> <span class="mh">0x120000</span>  <span class="p">,</span> <span class="mi">1</span><span class="n">M</span> <span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="n">ota_1</span><span class="p">,</span>    <span class="n">app</span><span class="p">,</span>  <span class="n">ota_1</span><span class="p">,</span> <span class="mh">0x220000</span>  <span class="p">,</span> <span class="mi">1</span><span class="n">M</span> <span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="n">nvs_key</span><span class="p">,</span>  <span class="n">data</span><span class="p">,</span> <span class="n">nvs_keys</span><span class="p">,</span> <span class="mh">0x320000</span> <span class="p">,</span> <span class="mh">0x1000</span> <span class="p">,</span> <span class="n">encrypted</span>
</span></span><span class="line"><span class="cl"><span class="cp"># Custom NVS data partition
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="n">custom_nvs</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nvs</span><span class="p">,</span> <span class="mh">0x321000</span>    <span class="p">,</span> <span class="mh">0x6000</span> <span class="p">,</span>
</span></span></code></pre></div><p>This partition table setting includes two <code>NVS</code> partitions, the default <code>nvs</code> and the <code>custom_nvs</code> partitions.</p>
<ul>
<li>
<p>The default <code>nvs</code> partition is used to store per-device PHY calibration data (different to initialization data) and store Wi-Fi data if the <code>esp_wifi_set_storage(WIFI_STORAGE_FLASH)</code> initialization function is used. As well as write data through the <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-reference/storage/nvs_flash.html#_CPPv410nvs_set_i812nvs_handle_tPKc6int8_t" target="_blank">nvs_set</a> API on the software. This <code>nvs</code> partition does not need to download the corresponding <code>nvs.bin</code> when the firmware is downloaded.
The default <code>nvs</code> partition will be <code>encrypted</code> while writing data to the <code>nvs</code> partition via the <a href="https://docs.espressif.com/projects/esp-idf/zh_CN/v5.2.1/esp32s3/api-reference/storage/nvs_flash.html#api" target="_blank">nvs_set</a>  API (Note: The <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-reference/storage/nvs_flash.html#_CPPv410nvs_get_i812nvs_handle_tPKcP6int8_t" target="_blank">nvs_get</a> (read) API does not support NVS encryption).</p>
</li>
<li>
<p>The <code>custom_nvs</code> partition can used to store multiple files which by the <code>custom_nvs.csv</code> file managed . The types of files that can be managed can refer to the <a href="https://docs.espressif.com/projects/esp-idf/en/release-v5.1/esp32/api-reference/storage/nvs_partition_gen.html#csv-file-format" target="_blank">CSV File Format</a>  instructions. And the <code>custom_nvs.bin</code> needs to be <code>encrypted</code> with <code>nvs_key</code> and downloaded the <code>encrypt_custom_nvs.bin</code> to the <code>custom_nvs</code> partition. Use a <code>custom_nvs.csv</code> file to Manage multiple files as follows:</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">key,type,encoding,value
</span></span><span class="line"><span class="cl">server_cert,namespace,,
</span></span><span class="line"><span class="cl">server_cert,file,binary,E:\esp\test\customized\server_cert\server_cert.crt
</span></span><span class="line"><span class="cl">server_key,namespace,,
</span></span><span class="line"><span class="cl">server_key,file,binary,E:\esp\test\customized\server_key\server.key
</span></span><span class="line"><span class="cl">server_ca,namespace,,
</span></span><span class="line"><span class="cl">server_ca,file,binary,E:\esp\test\customized\server_ca\server_ca.crt
</span></span></code></pre></div><p>You can also refer to <a href="https://github.com/espressif/esp-idf/tree/v5.3/examples/storage/nvsgen" target="_blank">esp-idf/examples/storage/nvsgen</a> example. This example use a <a href="https://github.com/espressif/esp-idf/blob/v5.3/examples/storage/nvsgen/nvs_data.csv" target="_blank">nvs_data.csv</a> file to manage some data to write in <code>nvs</code> partition.</p>
<p>With <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/flash-encryption.html#flash-encryption" target="_blank">Flash Encryption</a> enabled, the following types of data are <code>encrypted</code> by default:</p>
<ul>
<li><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-guides/startup.html#second-stage-bootloader" target="_blank">Second Stage Bootloader (Firmware Bootloader)</a></li>
<li><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-guides/partition-tables.html#partition-tables" target="_blank">Partition Table</a></li>
<li><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-reference/storage/nvs_encryption.html#nvs-encr-key-partition" target="_blank">NVS Key Partition</a></li>
<li><a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-reference/system/ota.html?highlight=ota#ota-data-partition" target="_blank">Otadata</a></li>
<li>All <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-guides/partition-tables.html#subtype" target="_blank">app type</a> partitions</li>
</ul>
<blockquote>
<p>The <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-reference/storage/nvs_encryption.html#nvs-encr-key-partition" target="_blank">NVS key partition</a> (<code>nvs_key</code> partition) is used to store the <code>nvs_key</code>, and the <code>nvs_key</code> is used to encrypt the <code>nvs</code> type partitions. In this case，default <code>nvs</code> and the <code>custom_nvs</code> partitions.</p></blockquote>
<p>Other types of data can be encrypted conditionally:</p>
<ul>
<li>Any partition marked with the <code>encrypted</code> flag in the partition table. For details, see <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/flash-encryption.html#encrypted-partition-flag" target="_blank">Encrypted Partition Flag</a>.</li>
<li>If Secure Boot is enabled，the <code>public key digest</code> will be <code>encrypted</code>.</li>
</ul>
<p><strong>Flash Download Tool</strong></p>
<p>If you are using the ESP32 series chip and want to enable <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/flash-encryption.html#flash-encryption" target="_blank">Flash Encryption</a>, <a href="https://docs.espressif.com/projects/esp-idf/zh_CN/v5.2.1/esp32s3/security/secure-boot-v2.html#secure-boot-v2" target="_blank">Secure Boot V2</a>, and <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-reference/storage/nvs_encryption.html#nvs-encryption" target="_blank">NVS Encryption</a> for mass production, we recommend using the <a href="https://www.espressif.com/en/support/download/other-tools?keys=flash" target="_blank">Flash Download Tool</a> to automate the process.</p>
<p>Using the <a href="https://www.espressif.com/en/support/download/other-tools?keys=flash" target="_blank">Flash Download Tool</a> for enabling these security features offers several advantages:</p>
<ul>
<li>Once the firmware download is completed, the Flash Encryption, Secure Boot, and NVS Encryption processes are automatically finalized.</li>
<li>Upon the first power-up, the device will directly run the <strong>encrypted firmware</strong>.</li>
<li>Risks related to power failure or instability during the encryption and security processes are minimized.</li>
</ul>
<p>The operational steps for using the <a href="https://www.espressif.com/en/support/download/other-tools?keys=flash" target="_blank">Flash Download Tool</a> to enable <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/flash-encryption.html#flash-encryption" target="_blank">Flash Encryption</a>, <a href="https://docs.espressif.com/projects/esp-idf/zh_CN/v5.2.1/esp32s3/security/secure-boot-v2.html#secure-boot-v2" target="_blank">Secure Boot V2</a>, and <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-reference/storage/nvs_encryption.html#nvs-encryption" target="_blank">NVS Encryption</a> are as follows:</p>
<ol>
<li>
<p><strong>Obtain the Necessary Keys</strong>:</p>
<ul>
<li>Before starting, you need to generate or obtain the encryption keys for Flash Encryption, Secure Boot, and NVS Encryption.</li>
</ul>
</li>
<li>
<p><strong>Enable Security Features in the Software</strong>:</p>
<ul>
<li>Configure the <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/flash-encryption.html#flash-encryption" target="_blank">Flash Encryption</a>, <a href="https://docs.espressif.com/projects/esp-idf/zh_CN/v5.2.1/esp32s3/security/secure-boot-v2.html#secure-boot-v2" target="_blank">Secure Boot V2</a>, and <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-reference/storage/nvs_encryption.html#nvs-encryption" target="_blank">NVS Encryption</a> options in your project and ensure your firmware is signed appropriately.</li>
</ul>
</li>
<li>
<p><strong>Encrypt and Flash the Firmware</strong>:</p>
<ul>
<li>When downloading the firmware, make sure to manually encrypt the <code>custom_nvs.bin</code> if needed. This file must be encrypted separately if it contains sensitive data.</li>
</ul>
</li>
</ol>
<p>By following these steps, you can securely provision and encrypt your ESP32 devices in a mass production environment using the <a href="https://www.espressif.com/en/support/download/other-tools?keys=flash" target="_blank">Flash Download Tool</a>.</p>

<h3 class="relative group">2 - Obtain the different keys 
    <div id="2---obtain-the-different-keys" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2---obtain-the-different-keys" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>How to Obtain different types of <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/flash-encryption.html#pregenerated-flash-encryption-key" target="_blank">Flash Encryption Keys</a>?</p>
<p>Users can use the <a href="https://github.com/espressif/esptool" target="_blank">esptool</a> by running the <code>generate_flash_encryption_key</code> commands to generate the different types Flash Encryption keys.</p>
<p>You can use command with <code>--help</code> to query the commands instructions:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">espsecure.py generate_flash_encryption_key --help
</span></span></code></pre></div><p>Run the following command to generate the <code>SHA-256</code> key:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">espsecure.py generate_flash_encryption_key --keylen <span class="m">128</span> flash_encrypt_key.bin
</span></span></code></pre></div><p>To generate the <code>AES-128</code> key, run</p>
<p>Please note:</p>
<ul>
<li>The Flash Download Tool only support <code>AES-128</code> key on ESP32-S3, so we recommend to use the <code>AES-128</code> key for ESP32-S3 Flash Encryption .</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">espsecure.py generate_flash_encryption_key flash_encrypt_key.bin
</span></span></code></pre></div><blockquote>
<p>When the <code>--keylen</code> parameter is not specified, It will generated the <code>AES-128</code> key by default</p></blockquote>
<ul>
<li>Running the follows command to generate the   <code>AES-256</code> key</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">espsecure.py generate_flash_encryption_key --keylen <span class="m">512</span> flash_encrypt_key.bin
</span></span></code></pre></div>
<h4 class="relative group">How to Obtain <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/host-based-security-workflows.html?highlight=secure_boot_signing_key%20pem#enable-secure-boot-v2-externally" target="_blank">Secure Boot V2</a> key ? 
    <div id="how-to-obtain-secure-boot-v2-key-" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#how-to-obtain-secure-boot-v2-key-" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>Base on the <code>ESP32S3</code>  chip to enable <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/secure-boot-v2.html#secure-boot-v2" target="_blank">Secure Boot V2</a> function will requires a <a href="https://docs.espressif.com/projects/esp-idf/zh_CN/release-v5.0/esp32/security/secure-boot-v2.html#generating-secure-boot-signing-key" target="_blank">rsa3072</a> type key.</p>
<p>Users can use the <a href="https://github.com/espressif/esptool" target="_blank">esptool</a> ，and running the <code>espsecure.py generate_signing_key</code> command to generate the <a href="https://docs.espressif.com/projects/esp-idf/zh_CN/v5.2.1/esp32s3/security/secure-boot-v2.html#secure-boot-v2" target="_blank">Secure Boot V2</a>  key.</p>
<blockquote>
<p>You can use <code>espsecure.py generate_signing_key --help</code> command to query the commands instructions.</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">espsecure.py generate_signing_key secure_boot_signing_key.pem --version <span class="m">2</span> --scheme rsa3072
</span></span></code></pre></div><p>Alternatively, you can also install the <a href="https://www.openssl.org/source/" target="_blank">OpenSSL</a> environment and to generate an <a href="https://docs.espressif.com/projects/esp-idf/en/release-v5.1/esp32s3/security/secure-boot-v2.html#generating-secure-boot-signing-key" target="_blank">RSA 3072 type private key for Secure Boot signing </a> with the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">openssl genrsa -out secure_boot_signing_key.pem <span class="m">3072</span>
</span></span></code></pre></div>
<h4 class="relative group">How to Obtain <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/security/host-based-security-workflows.html?highlight=secure_boot_signing_key%20pem#enable-secure-boot-v2-externally" target="_blank">Secure Boot V2</a> public key digest? 
    <div id="how-to-obtain-secure-boot-v2-public-key-digest" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#how-to-obtain-secure-boot-v2-public-key-digest" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>When enable Secure Boot V2 function on  <a href="https://www.espressif.com/en/support/download/other-tools?keys=flash" target="_blank">Flash Download Tool</a>  ， you need to add the Secure Boot V2 Key Digest. So you need to base on the Secure Boot V2 Key to generate the digest of the <code>public key</code>.  Please see: <a href="https://docs.espressif.com/projects/esp-idf/zh_CN/v5.2.1/esp32/security/host-based-security-workflows.html?highlight=secure_boot_signing_key%20pem#enable-secure-boot-v2-externally" target="_blank">Enable Secure Boot V2 Externally</a>.</p>
<blockquote>
<p>You can use <code>espsecure.py digest_rsa_public_key --help</code> command to query the commands instructions.</p></blockquote>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">espsecure.py digest_rsa_public_key --keyfile secure_boot_signing_key.pem --output public_key_digest.bin
</span></span></code></pre></div>
<h4 class="relative group">How to Obtain <code>nvs_key</code> ? 
    <div id="how-to-obtain-nvs_key-" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#how-to-obtain-nvs_key-" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>You can use the <code>nvs partition tool</code> （<a href="https://github.com/espressif/esp-idf/tree/v5.1.2/components/nvs_flash/nvs_partition_generator" target="_blank">esp-idf/components/nvs_flash/nvs_partition_generator</a>）and running the <code>nvs_partition_gen.py</code>  command to obtain the <code>nvs_key</code> file.</p>
<blockquote>
<p>You can use <code>nvs_partition_gen.py --help</code> command to query the commands instructions.</p></blockquote>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">python E:<span class="se">\e</span>sp<span class="se">\E</span>spressif<span class="se">\f</span>rameworks<span class="se">\e</span>sp-idf-5.2.1<span class="se">\e</span>sp-idf<span class="se">\c</span>omponents<span class="se">\n</span>vs_flash<span class="se">\n</span>vs_partition_generator<span class="se">\n</span>vs_partition_gen.py generate-key --keyfile nvs_key.bin
</span></span></code></pre></div>
<h4 class="relative group">How to use <code>nvs_key</code> to encrypt the <code>custom_nvs.csv</code> file ? 
    <div id="how-to-use-nvs_key-to-encrypt-the-custom_nvscsv-file-" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#how-to-use-nvs_key-to-encrypt-the-custom_nvscsv-file-" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>If you need to download <code>custom_nvs.bin</code> when you download all firmware, you also need to manually encrypt <code>custom_nvs.bin</code> use <code>nvs_key</code>. You can running the follows command to use <code>nvs_key.bin</code> to encrypt the <code>custom_nvs.csv</code>  file and get the encrypted <code>encrypt_custom_nvs.bin</code>.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">python E:<span class="se">\e</span>sp<span class="se">\E</span>spressif<span class="se">\f</span>rameworks<span class="se">\e</span>sp-idf-5.2.1<span class="se">\e</span>sp-idf<span class="se">\c</span>omponents<span class="se">\n</span>vs_flash<span class="se">\n</span>vs_partition_generator<span class="se">\n</span>vs_partition_gen.py encrypt custom_nvs.csv encrypt_custom_nvs.bin 0x6000 --inputkey keys<span class="se">\n</span>vs_key.bin
</span></span></code></pre></div><blockquote>
<ul>
<li><code>0x6000</code> is size of <code>encrypt_custom_nvs.bin</code> firmware</li>
</ul></blockquote>

<h3 class="relative group">3 - Software Configuration 
    <div id="3---software-configuration" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3---software-configuration" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>On the Software Configuration side，you will need to enable <code>Flash Encryption</code>, <code>Secure Boot V2</code> and <code>NVS  Encryption</code> setting.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">idf.py menuconfig
</span></span></code></pre></div><p>Go to <code>Security features</code> then set the options as the image below:</p>
<p>





<figure>
    <img class="my-0 rounded-md" loading="lazy" alt="Enable Secure Boot V2" src="./img/enable-secure-boot.webp" />

  
    <figcaption>Enable Secure Boot V2</figcaption>
</figure>
</p>
<p>Please note you need to add the <code>secure_boot_signing_key.pem</code> path.</p>
<p>Set the <code>Enable Flash Encryption</code> options:</p>
<p>





<figure>
    <img class="my-0 rounded-md" loading="lazy" alt="Enable Flash Encryption" src="./img/enable-flash-encryption.webp" />

  
    <figcaption>Enable Flash Encryption</figcaption>
</figure>
</p>

<h4 class="relative group">Flash Encryption Modes 
    <div id="flash-encryption-modes" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#flash-encryption-modes" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p><code>Flash Encryption</code> supports two modes: <code>Release</code> and <code>Development (NOT SECURE)</code>.</p>
<ul>
<li>
<p><strong>Release Mode</strong>:</p>
<ul>
<li>When <code>Release</code> mode is selected, the <code>SPI_BOOT_CRYPT_CNT</code> eFuse bit is set to <code>0b111</code>, permanently enabling Flash Encryption. This mode is <strong>recommended for mass production</strong>, as it provides full security by locking the encryption settings after the first flash.</li>
</ul>
</li>
<li>
<p><strong>Development Mode (NOT SECURE)</strong>:</p>
<ul>
<li>In <code>Development (NOT SECURE)</code> mode, the <code>SPI_BOOT_CRYPT_CNT</code> eFuse bit is set to <code>0b001</code>. This mode allows for testing and debugging, offering the flexibility to flash firmware multiple times with encryption enabled. However, this mode is <strong>not secure</strong> and is intended only for development purposes.</li>
<li>If Flash Encryption is enabled in <code>Development (NOT SECURE)</code> mode, there is one chance to disable it. To disable Flash Encryption after it has been enabled in this mode, you can run the following command:</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">espefuse.py -p port burn_efuse SPI_BOOT_CRYPT_CNT 0x3
</span></span></code></pre></div><p>Because the Flash Download Tool only supports AES-128 on the ESP32-S3, you should select the <strong>AES-128</strong> key option in the software.</p>
<p>Additionally, pay attention to the <code>UART ROM download mode</code> setting. If you prefer not to disable the download mode, it is recommended to select the configuration option <strong>UART ROM download mode (Enabled, not recommended)</strong>. For more details on different download mode configuration options, refer to the <a href="https://docs.espressif.com/projects/esp-idf/en/v5.2.1/esp32s3/api-reference/kconfig.html#config-secure-uart-rom-dl-mode" target="_blank">CONFIG_SECURE_UART_ROM_DL_MODE</a> documentation.</p>

<h4 class="relative group">Enable NVS Encryption 
    <div id="enable-nvs-encryption" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#enable-nvs-encryption" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>To enable the <code>NVS Encryption</code>, set the following in the configuration menu:</p>
<p>Go to <code>Component config → NVS</code> and set the <code>Enable NVS encryption</code>.</p>
<p>





<figure>
    <img class="my-0 rounded-md" loading="lazy" alt="Enable NVS Encryption" src="./img/nvs-encryption.webp" />

  
    <figcaption>Enable NVS Encryption</figcaption>
</figure>
</p>

<h4 class="relative group">Increase the partition table offset 
    <div id="increase-the-partition-table-offset" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#increase-the-partition-table-offset" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>Since the Flash Encryption and Secure Boot V2 function will increase the size of the bootloader firmware, so you need to increase the partition table offset(Default is <code>0x8000</code>) setting. As follows:</p>
<p>Go to <code>Partition Table</code> and set the offset to <code>(0xF000)</code> in the <code>Offset of partition table</code>.</p>
<p>





<figure>
    <img class="my-0 rounded-md" loading="lazy" alt="Increase Partition Table Offset" src="./img/partition-table-offset.webp" />

  
    <figcaption>Increase Partition Table Offset</figcaption>
</figure>
</p>

<h4 class="relative group">Build the project 
    <div id="build-the-project" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#build-the-project" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>Now you need to build the project to get the compiled firmware.</p>
<p>Run the build command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">idf.py build
</span></span></code></pre></div><p>Since the secure boot function is enabled, after compilation, you will generate several firmware files, including <code>bootloader.bin</code>, <code>bootloader-unsigned.bin</code>, <code>app.bin</code>, <code>app-unsigned.bin</code>, and other partition firmware files.</p>
<p>The <code>bootloader.bin</code> and <code>app.bin</code> are signed firmware, while <code>bootloader-unsigned.bin</code> and <code>app-unsigned.bin</code> are the unsigned versions. You need to download the <strong>signed</strong> firmware files (<code>bootloader.bin</code> and <code>app.bin</code>) along with the other partition firmware files.</p>
<p>From the compilation log, you can find the firmware file paths and the corresponding download addresses. These firmware files and their download addresses need to be imported into the Flash Download Tool, as shown below:</p>
<p>





<figure>
    <img class="my-0 rounded-md" loading="lazy" alt="Firmware Offset Addresses" src="./img/firmware-offset-address.webp" />

  
    <figcaption>Firmware Offset Addresses</figcaption>
</figure>
</p>
<p>Firmware paths:</p>
<p>





<figure>
    <img class="my-0 rounded-md" loading="lazy" alt="Firmware path" src="./img/firmware-path.webp" />

  
    <figcaption>Firmware path</figcaption>
</figure>
</p>

<h2 class="relative group">4 - Flash Download Tool Configuration 
    <div id="4---flash-download-tool-configuration" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#4---flash-download-tool-configuration" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>On this step, we will show how to configure the <a href="https://www.espressif.com/en/support/download/other-tools?keys=flash" target="_blank">Flash Download Tool</a> with the generated keys. This tool is only available for <strong>Windows</strong>.</p>
<p>First, put the <code>Flash Encryption Key</code> and the <code>digest of the Secure boot V2 public key</code> into the <code>flash_download_tool\secure</code> directory, as following：</p>
<p>





<figure>
    <img class="my-0 rounded-md" loading="lazy" alt="Secure Keys" src="./img/secure-keys.webp" />

  
    <figcaption>Secure Keys</figcaption>
</figure>
</p>
<p>In the <code>configure\esp32s3\security.conf</code> configuration file of the <a href="https://www.espressif.com/en/support/download/other-tools?keys=flash" target="_blank">Flash Download Tool</a>, enable the <code>Flash Encryption</code> and <code>Secure Boot V2</code> configuration options.</p>
<p>





<figure>
    <img class="my-0 rounded-md" loading="lazy" alt="Security Config File" src="./img/flash-security-config-file.webp" />

  
    <figcaption>Security Config File</figcaption>
</figure>
</p>
<p>The security configurations to be modified are:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="p">[</span><span class="n">SECURE</span> <span class="n">BOOT</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">secure_boot_en</span> <span class="o">=</span> <span class="n">True</span>                                    <span class="err">\\</span> <span class="n">Enable</span> <span class="n">Secure</span> <span class="n">Boot</span>         
</span></span><span class="line"><span class="cl"><span class="n">public_key_digest_path</span> <span class="o">=</span> <span class="p">.</span><span class="err">\</span><span class="n">bin</span><span class="err">\</span><span class="n">public_key_digest</span><span class="p">.</span><span class="n">bin</span>     <span class="err">\\</span> <span class="n">Setting</span> <span class="n">public_key_digest</span><span class="p">.</span><span class="n">bin</span> <span class="n">path</span> <span class="k">for</span> <span class="n">Secure</span> <span class="n">Boot</span>
</span></span><span class="line"><span class="cl"><span class="n">public_key_digest_block_index</span> <span class="o">=</span> <span class="mi">0</span>                        <span class="err">\\</span> <span class="n">Index</span> <span class="n">of</span> <span class="n">the</span> <span class="n">eFuse</span> <span class="n">block</span> <span class="n">where</span> <span class="n">the</span> <span class="n">public</span> <span class="n">key</span> <span class="n">digest</span> <span class="n">file</span> <span class="n">is</span> <span class="n">stored</span><span class="p">.</span> <span class="nl">Default</span><span class="p">:</span> <span class="mf">0.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">FLASH</span> <span class="n">ENCRYPTION</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">flash_encryption_en</span> <span class="o">=</span> <span class="n">True</span>                               <span class="err">\\</span> <span class="n">Enable</span> <span class="n">Flash</span> <span class="n">Encryption</span>
</span></span><span class="line"><span class="cl"><span class="n">reserved_burn_times</span> <span class="o">=</span> <span class="mi">0</span>                                  <span class="err">\\</span> <span class="n">Configures</span> <span class="n">how</span> <span class="n">many</span> <span class="n">times</span> <span class="p">[</span><span class="mi">0</span> <span class="n">in</span> <span class="n">this</span> <span class="k">case</span> <span class="n">when</span> <span class="n">config</span> <span class="n">Flash</span> <span class="n">Encryption</span> <span class="n">Release</span> <span class="n">mode</span> <span class="n">on</span> <span class="n">the</span> <span class="n">software</span><span class="p">]</span> <span class="n">are</span> <span class="n">reserved</span> <span class="k">for</span> <span class="n">the</span> <span class="n">flashing</span> <span class="n">operation</span>
</span></span><span class="line"><span class="cl"><span class="n">flash_encrypt_key_block_index</span> <span class="o">=</span> <span class="mi">1</span>                     <span class="err">\\</span> <span class="n">Index</span> <span class="n">of</span> <span class="n">the</span> <span class="n">eFuse</span> <span class="n">block</span> <span class="n">where</span> <span class="n">the</span> <span class="n">Flash</span> <span class="n">Encrypt</span> <span class="n">Key</span> <span class="n">file</span> <span class="n">is</span> <span class="n">stored</span><span class="p">.</span> <span class="nl">Default</span><span class="p">:</span> <span class="mf">0.</span> <span class="nl">Range</span><span class="p">:</span> <span class="mi">0</span><span class="o">~</span><span class="mf">4.</span> <span class="n">Note</span> <span class="n">that</span> <span class="n">this</span> <span class="n">option</span> <span class="n">can</span> <span class="n">only</span> <span class="n">be</span> <span class="n">set</span> <span class="n">to</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">ESP32</span><span class="o">-</span><span class="n">C2</span><span class="p">.</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">SECURE</span> <span class="n">OTHER</span> <span class="n">CONFIG</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">flash_encryption_use_customer_key_enable</span> <span class="o">=</span> <span class="n">True</span>          <span class="err">\\</span> <span class="n">Configures</span> <span class="n">whether</span> <span class="n">to</span> <span class="n">enable</span> <span class="n">the</span> <span class="n">use</span> <span class="n">of</span> <span class="n">a</span> <span class="n">customer</span><span class="o">-</span><span class="n">specified</span> <span class="n">encryption</span> <span class="n">key</span>
</span></span><span class="line"><span class="cl"><span class="n">flash_encryption_use_customer_key_path</span> <span class="o">=</span> <span class="p">.</span><span class="err">\</span><span class="n">bin</span><span class="err">\</span><span class="n">flash_encrypt_key</span><span class="p">.</span><span class="n">bin</span>          <span class="err">\\</span> <span class="n">Setting</span> <span class="n">customer</span><span class="o">-</span><span class="n">specified</span> <span class="n">Flash</span> <span class="n">Encryption</span> <span class="n">key</span> <span class="n">file</span> <span class="n">path</span>
</span></span><span class="line"><span class="cl"><span class="n">flash_force_write_enable</span> <span class="o">=</span> <span class="n">True</span>                          <span class="err">\\</span> <span class="n">Configures</span> <span class="n">whether</span> <span class="n">to</span> <span class="n">skip</span> <span class="n">encryption</span> <span class="n">and</span> <span class="n">secure</span> <span class="n">boot</span> <span class="n">checks</span> <span class="n">during</span> <span class="n">flashing</span><span class="p">.</span> <span class="n">If</span> <span class="n">it</span> <span class="n">is</span> <span class="n">set</span> <span class="n">to</span> <span class="nf">False</span> <span class="p">(</span><span class="k">default</span><span class="p">),</span> <span class="n">an</span> <span class="n">error</span> <span class="n">message</span> <span class="n">may</span> <span class="n">pop</span> <span class="n">up</span> <span class="n">when</span> <span class="n">attempting</span> <span class="n">to</span> <span class="n">flash</span> <span class="n">products</span> <span class="n">with</span> <span class="n">enabled</span> <span class="n">flash</span> <span class="n">encryption</span> <span class="n">or</span> <span class="n">secure</span> <span class="n">boot</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">FLASH</span> <span class="n">ENCRYPTION</span> <span class="n">KEYS</span> <span class="n">LOCAL</span> <span class="n">SAVE</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">keys_save_enable</span> <span class="o">=</span> <span class="n">False</span>
</span></span><span class="line"><span class="cl"><span class="n">encrypt_keys_enable</span> <span class="o">=</span> <span class="n">False</span>
</span></span><span class="line"><span class="cl"><span class="n">encrypt_keys_aeskey_path</span> <span class="o">=</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// On the first boot, the flash encryption process burns by default the following eFuses:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">ESP32S3</span> <span class="n">EFUSE</span> <span class="n">BIT</span> <span class="n">CONFIG</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">dis_usb_jtag</span> <span class="o">=</span> <span class="n">True</span>                       <span class="err">\\</span> <span class="n">Configures</span> <span class="n">whether</span> <span class="n">to</span> <span class="n">disable</span> <span class="n">USB</span> <span class="n">JTAG</span>
</span></span><span class="line"><span class="cl"><span class="n">hard_dis_jtag</span> <span class="o">=</span> <span class="n">True</span>                      <span class="err">\\</span> <span class="n">Configures</span> <span class="n">whether</span> <span class="n">to</span> <span class="n">hard</span><span class="o">-</span><span class="n">disable</span> <span class="n">JTAG</span>
</span></span><span class="line"><span class="cl"><span class="n">soft_dis_jtag</span> <span class="o">=</span> <span class="mi">7</span>                         <span class="err">\\</span> <span class="n">Configures</span> <span class="n">whether</span> <span class="n">to</span> <span class="n">soft</span><span class="o">-</span><span class="n">disable</span> <span class="n">JTAG</span>
</span></span><span class="line"><span class="cl"><span class="n">dis_usb_otg_download_mode</span> <span class="o">=</span> <span class="n">False</span>         <span class="err">\\</span> <span class="n">Configures</span> <span class="n">whether</span> <span class="n">to</span> <span class="n">disable</span> <span class="n">USB</span> <span class="n">OTG</span> <span class="n">download</span>
</span></span><span class="line"><span class="cl"><span class="n">dis_direct_boot</span> <span class="o">=</span> <span class="n">True</span>                    <span class="err">\\</span> <span class="n">Configures</span> <span class="n">whether</span> <span class="n">to</span> <span class="n">disable</span> <span class="n">direct</span> <span class="n">boot</span> <span class="n">mode</span>
</span></span><span class="line"><span class="cl"><span class="n">dis_download_icache</span> <span class="o">=</span> <span class="n">True</span>                <span class="err">\\</span> <span class="n">Configures</span> <span class="n">whether</span> <span class="n">to</span> <span class="n">disable</span> <span class="n">the</span> <span class="n">entire</span> <span class="n">MMU</span> <span class="n">flash</span> <span class="n">instruction</span> <span class="n">cache</span> <span class="n">when</span> <span class="n">running</span> <span class="n">in</span> <span class="n">UART</span> <span class="n">bootloader</span> <span class="n">mode</span>
</span></span><span class="line"><span class="cl"><span class="n">dis_download_dcache</span> <span class="o">=</span> <span class="n">True</span>                <span class="err">\\</span> <span class="n">Configures</span> <span class="n">whether</span> <span class="n">to</span> <span class="n">disable</span> <span class="n">the</span> <span class="n">entire</span> <span class="n">MMU</span> <span class="n">flash</span> <span class="n">data</span> <span class="n">cache</span> <span class="n">in</span> <span class="n">the</span> <span class="n">UART</span> <span class="n">bootloader</span> <span class="n">mode</span>
</span></span><span class="line"><span class="cl"><span class="n">dis_download_manual_encrypt</span> <span class="o">=</span> <span class="n">True</span>        <span class="err">\\</span> <span class="n">Configures</span> <span class="n">whether</span> <span class="n">to</span> <span class="n">disable</span> <span class="n">flash</span> <span class="n">encryption</span> <span class="n">operation</span> <span class="n">when</span> <span class="n">running</span> <span class="n">in</span> <span class="n">UART</span> <span class="n">bootloader</span> <span class="n">boot</span> <span class="n">mode</span>
</span></span></code></pre></div>
<h3 class="relative group">Restart the Flash Download Tool 
    <div id="restart-the-flash-download-tool" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#restart-the-flash-download-tool" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>Before proceeding with the process, restart the <strong>Flash Download Tool</strong> software. After restarting, the new configuration file located in <code>configure\esp32s3\security.conf</code> will be read, and the updated configuration will be loaded.</p>
<p>If everything is working correctly, a warning message will be displayed:</p>
<p>





<figure>
    <img class="my-0 rounded-md" loading="lazy" alt="Flash Download Tool Boot Security Config" src="./img/flash-download-tool-boot-security-config.webp" />

  
    <figcaption>Flash Download Tool Boot Security Config</figcaption>
</figure>
</p>
<p>Now you can click <code>OK</code>.</p>

<h2 class="relative group">Import All Firmware to be Downloaded 
    <div id="import-all-firmware-to-be-downloaded" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#import-all-firmware-to-be-downloaded" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Based on the partition table settings, add all the firmware files and their respective download addresses. The interface should look similar to the following:</p>
<p>





<figure>
    <img class="my-0 rounded-md" loading="lazy" alt="Add Bin Files" src="./img/bin-file.webp" />

  
    <figcaption>Add Bin Files</figcaption>
</figure>
</p>

<h2 class="relative group">Downloading All Firmware 
    <div id="downloading-all-firmware" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#downloading-all-firmware" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>During the firmware download process, the Flash Download Tool will write the following to the chip&rsquo;s eFuse blocks:</p>
<ul>
<li>The <code>Flash encryption key</code> and the <code>Secure Boot V2 public key digest</code>.</li>
<li>The <code>SPI_BOOT_CRYPT_CNT</code> eFuse bit will be set to enable <strong>Flash Encryption</strong>, and the <code>SECURE_BOOT_EN</code> eFuse bit will be set to enable <strong>Secure Boot V2</strong>.</li>
<li>The tool will also apply all configuration settings from the <code>configure\esp32s3\security.conf</code> file to the chip&rsquo;s eFuses.</li>
</ul>
<p>You will see a log similar to the one below from the tool&rsquo;s output:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">test offset :  0 0x0
</span></span><span class="line"><span class="cl">case ok
</span></span><span class="line"><span class="cl">test offset :  61440 0xf000
</span></span><span class="line"><span class="cl">case ok
</span></span><span class="line"><span class="cl">test offset :  81920 0x14000
</span></span><span class="line"><span class="cl">case ok
</span></span><span class="line"><span class="cl">test offset :  90112 0x16000
</span></span><span class="line"><span class="cl">case ok
</span></span><span class="line"><span class="cl">test offset :  131072 0x20000
</span></span><span class="line"><span class="cl">case ok
</span></span><span class="line"><span class="cl">test offset :  3276800 0x320000
</span></span><span class="line"><span class="cl">case ok
</span></span><span class="line"><span class="cl">test offset :  3280896 0x321000
</span></span><span class="line"><span class="cl">case ok
</span></span><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">Uploading stub...
</span></span><span class="line"><span class="cl">Running stub...
</span></span><span class="line"><span class="cl">Stub running...
</span></span><span class="line"><span class="cl">Changing baud rate to 115200
</span></span><span class="line"><span class="cl">Changed.
</span></span><span class="line"><span class="cl">NO XMC flash  detected!
</span></span><span class="line"><span class="cl">SPI_BOOT_CRYPT_CNT 0
</span></span><span class="line"><span class="cl">SECURE_BOOT_EN False
</span></span><span class="line"><span class="cl">ESP32 secure boot v2 skip generate key
</span></span><span class="line"><span class="cl">Encrypting bin file ...please wait!!!
</span></span><span class="line"><span class="cl">Using 256-bit key
</span></span><span class="line"><span class="cl">Encrypting bin file ...please wait!!!
</span></span><span class="line"><span class="cl">Using 256-bit key
</span></span><span class="line"><span class="cl">Encrypting bin file ...please wait!!!
</span></span><span class="line"><span class="cl">Using 256-bit key
</span></span><span class="line"><span class="cl">Encrypting bin file ...please wait!!!
</span></span><span class="line"><span class="cl">Using 256-bit key
</span></span><span class="line"><span class="cl">Encrypting bin file ...please wait!!!
</span></span><span class="line"><span class="cl">Using 256-bit key
</span></span><span class="line"><span class="cl">Encrypting bin file ...please wait!!!
</span></span><span class="line"><span class="cl">Using 256-bit key
</span></span><span class="line"><span class="cl">Encrypting bin file ...please wait!!!
</span></span><span class="line"><span class="cl">Using 256-bit key
</span></span><span class="line"><span class="cl">burn secure key ...
</span></span><span class="line"><span class="cl">Burn keys to blocks:
</span></span><span class="line"><span class="cl"> - BLOCK_KEY1 -&gt; [5f 4d 93 00 10 24 fd c4 3e ff 04 49 53 e2 88 83 c0 bc 2b d6 7e f1 81 0e f6 84 cd b7 0b 72 ae df]
</span></span><span class="line"><span class="cl">        Reversing byte order for AES-XTS hardware peripheral
</span></span><span class="line"><span class="cl">        &#39;KEY_PURPOSE_1&#39;: &#39;USER&#39; -&gt; &#39;XTS_AES_128_KEY&#39;.
</span></span><span class="line"><span class="cl">        Disabling write to &#39;KEY_PURPOSE_1&#39;.
</span></span><span class="line"><span class="cl">        Disabling read to key block
</span></span><span class="line"><span class="cl">        Disabling write to key block
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> - BLOCK_KEY0 -&gt; [c3 f6 4b 2e 84 92 f1 fc 86 d0 17 17 fe 62 04 6f e0 83 17 36 19 1a f4 9e 86 df e5 50 74 44 86 bf]
</span></span><span class="line"><span class="cl">        &#39;KEY_PURPOSE_0&#39;: &#39;USER&#39; -&gt; &#39;SECURE_BOOT_DIGEST0&#39;.
</span></span><span class="line"><span class="cl">        Disabling write to &#39;KEY_PURPOSE_0&#39;.
</span></span><span class="line"><span class="cl">        Disabling write to key block
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Check all blocks for burn...
</span></span><span class="line"><span class="cl">idx, BLOCK_NAME,          Conclusion
</span></span><span class="line"><span class="cl">[00] BLOCK0               is not empty
</span></span><span class="line"><span class="cl">        (written ): 0x0000000000000000000000000000d1f50000000000000000
</span></span><span class="line"><span class="cl">        (to write): 0x000000000000000000000000490000000000000201800300
</span></span><span class="line"><span class="cl">        (coding scheme = NONE)
</span></span><span class="line"><span class="cl">[04] BLOCK_KEY0           is empty, will burn the new value
</span></span><span class="line"><span class="cl">[05] BLOCK_KEY1           is empty, will burn the new value
</span></span><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">This is an irreversible operation!
</span></span><span class="line"><span class="cl">BURN BLOCK5  - OK (write block == read block)
</span></span><span class="line"><span class="cl">BURN BLOCK4  - OK (write block == read block)
</span></span><span class="line"><span class="cl">BURN BLOCK0  - OK (all write block bits are set)
</span></span><span class="line"><span class="cl">Reading updated efuses...
</span></span><span class="line"><span class="cl">Successful
</span></span><span class="line"><span class="cl">The efuses to burn:
</span></span><span class="line"><span class="cl">  from BLOCK0
</span></span><span class="line"><span class="cl">     - SPI_BOOT_CRYPT_CNT
</span></span><span class="line"><span class="cl">     - SECURE_BOOT_EN
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Burning efuses:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    - &#39;SPI_BOOT_CRYPT_CNT&#39; (Enables flash encryption when 1 or 3 bits are set and disabled otherwise) 0b000 -&gt; 0b111
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    - &#39;SECURE_BOOT_EN&#39; (Set this bit to enable secure boot) 0b0 -&gt; 0b1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Check all blocks for burn...
</span></span><span class="line"><span class="cl">idx, BLOCK_NAME,          Conclusion
</span></span><span class="line"><span class="cl">[00] BLOCK0               is not empty
</span></span><span class="line"><span class="cl">        (written ): 0x0000000000000000000000004900d1f50000000201800300
</span></span><span class="line"><span class="cl">        (to write): 0x000000000000000000100000001c00000000000000000000
</span></span><span class="line"><span class="cl">        (coding scheme = NONE)
</span></span><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">This is an irreversible operation!
</span></span><span class="line"><span class="cl">BURN BLOCK0  - OK (all write block bits are set)
</span></span><span class="line"><span class="cl">Reading updated efuses...
</span></span><span class="line"><span class="cl">Checking efuses...
</span></span><span class="line"><span class="cl">Successful
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">WARNING: - compress and encrypt options are mutually exclusive
</span></span><span class="line"><span class="cl">Will flash uncompressed
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> is stub and send flash finish
</span></span><span class="line"><span class="cl">The efuses to burn:
</span></span><span class="line"><span class="cl">  from BLOCK0
</span></span><span class="line"><span class="cl">     - DIS_USB_JTAG
</span></span><span class="line"><span class="cl">     - DIS_PAD_JTAG
</span></span><span class="line"><span class="cl">     - SOFT_DIS_JTAG
</span></span><span class="line"><span class="cl">     - DIS_DIRECT_BOOT
</span></span><span class="line"><span class="cl">     - DIS_DOWNLOAD_ICACHE
</span></span><span class="line"><span class="cl">     - DIS_DOWNLOAD_DCACHE
</span></span><span class="line"><span class="cl">     - DIS_DOWNLOAD_MANUAL_ENCRYPT
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Burning efuses:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    - &#39;DIS_USB_JTAG&#39; (Set this bit to disable function of usb switch to jtag in module of usb device) 0b0 -&gt; 0b1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    - &#39;DIS_PAD_JTAG&#39; (Set this bit to disable JTAG in the hard way. JTAG is disabled permanently) 0b0 -&gt; 0b1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    - &#39;SOFT_DIS_JTAG&#39; (Set these bits to disable JTAG in the soft way (odd number 1 means disable ). JTAG can be enabled in HMAC module) 0b000 -&gt; 0b111
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    - &#39;DIS_DIRECT_BOOT&#39; (Disable direct boot mode) 0b0 -&gt; 0b1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    - &#39;DIS_DOWNLOAD_ICACHE&#39; (Set this bit to disable Icache in download mode (boot_mode[3:0] is 0; 1; 2; 3; 6; 7)) 0b0 -&gt; 0b1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    - &#39;DIS_DOWNLOAD_DCACHE&#39; (Set this bit to disable Dcache in download mode ( boot_mode[3:0] is 0; 1; 2; 3; 6; 7)) 0b0 -&gt; 0b1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    - &#39;DIS_DOWNLOAD_MANUAL_ENCRYPT&#39; (Set this bit to disable flash encryption when in download boot modes) 0b0 -&gt; 0b1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Check all blocks for burn...
</span></span><span class="line"><span class="cl">idx, BLOCK_NAME,          Conclusion
</span></span><span class="line"><span class="cl">[00] BLOCK0               is not empty
</span></span><span class="line"><span class="cl">        (written ): 0x000000000000000000100000491cd1f50000000201800300
</span></span><span class="line"><span class="cl">        (to write): 0x00000000000000020040000000000000001f0c0000000000
</span></span><span class="line"><span class="cl">        (coding scheme = NONE)
</span></span><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">This is an irreversible operation!
</span></span><span class="line"><span class="cl">BURN BLOCK0  - OK (all write block bits are set)
</span></span><span class="line"><span class="cl">Reading updated efuses...
</span></span><span class="line"><span class="cl">Checking efuses...
</span></span><span class="line"><span class="cl">Successful
</span></span></code></pre></div><p>After the firmware is downloaded, the Flash Encryption and Secure Boot V2 processes are completed. The firmware download process performs the following steps:</p>
<ul>
<li>Writing the <code>Secure Boot V2 public key digest</code> to chip eFuse <code>BLOCK_KEY0 (KEY_PURPOSE_0)</code></li>
<li>Writing the <code>Flash Encryption key</code> to chip eFuse <code>BLOCK_KEY1 (KEY_PURPOSE_1)</code></li>
<li>Setting the <code>SPI_BOOT_CRYPT_CNT</code> eFuse bit to <code>0b111</code> to enable Flash Encryption</li>
<li>Setting the <code>SECURE_BOOT_EN</code> eFuse bit to <code>0b1</code> to enable Secure Boot V2</li>
<li>Setting the <code>DIS_USB_JTAG</code> eFuse bit to <code>0b1</code> to disable USB JTAG</li>
<li>Setting the <code>DIS_PAD_JTAG</code> eFuse bit to <code>0b1</code> to disable PAD JTAG</li>
<li>Setting the <code>SOFT_DIS_JTAG</code> eFuse bit to <code>0b111</code> to disable JTAG functionality</li>
<li>Setting the <code>DIS_DIRECT_BOOT</code> eFuse bit to <code>0b1</code> to disable direct boot</li>
<li>Setting the <code>DIS_DOWNLOAD_ICACHE</code> eFuse bit to <code>0b1</code> to disable instruction cache during download</li>
<li>Setting the <code>DIS_DOWNLOAD_DCACHE</code> eFuse bit to <code>0b1</code> to disable data cache during download</li>
<li>Setting the <code>DIS_DOWNLOAD_MANUAL_ENCRYPT</code> eFuse bit to <code>0b1</code> to disable manual encryption during download</li>
</ul>

<h2 class="relative group">Running the Firmware 
    <div id="running-the-firmware" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#running-the-firmware" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>During the first startup (power-up), the firmware will go through the following checks:</p>
<ul>
<li>Verify if the <strong>Secure Boot V2</strong> feature is enabled.</li>
<li>Verify if the <strong>Flash Encryption</strong> feature is enabled.</li>
<li>Verify if the <strong>NVS Encryption</strong> feature is enabled.</li>
<li>Validate the <strong>signed and encrypted firmware</strong>.</li>
</ul>
<p>If all checks and verification processes succeed, the firmware will run normally.</p>
<p>The firmware running log on the first startup will appear as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">ESP-ROM:esp32s3-20210327
</span></span><span class="line"><span class="cl">Build:Mar 27 2021
</span></span><span class="line"><span class="cl">rst:0x1 (POWERON),boot:0x8 (SPI_FAST_FLASH_BOOT)
</span></span><span class="line"><span class="cl">SPIWP:0xee
</span></span><span class="line"><span class="cl">mode:DIO, clock div:1
</span></span><span class="line"><span class="cl">Valid secure boot key blocks: 0
</span></span><span class="line"><span class="cl">secure boot verification succeeded
</span></span><span class="line"><span class="cl">load:0x3fce3980,len:0x3a1c
</span></span><span class="line"><span class="cl">load:0x403c9700,len:0x4
</span></span><span class="line"><span class="cl">load:0x403c9704,len:0xcbc
</span></span><span class="line"><span class="cl">load:0x403cc700,len:0x52a0
</span></span><span class="line"><span class="cl">entry 0x403c9914
</span></span><span class="line"><span class="cl">I (73) boot: ESP-IDF v5.2.2-520-g9d6583f763 2nd stage bootloader
</span></span><span class="line"><span class="cl">I (73) boot: compile time Aug 16 2024 15:58:33
</span></span><span class="line"><span class="cl">I (74) boot: Multicore bootloader
</span></span><span class="line"><span class="cl">I (78) boot: chip revision: v0.1
</span></span><span class="line"><span class="cl">I (81) boot.esp32s3: Boot SPI Speed : 80MHz
</span></span><span class="line"><span class="cl">I (86) boot.esp32s3: SPI Mode       : DIO
</span></span><span class="line"><span class="cl">I (91) boot.esp32s3: SPI Flash Size : 8MB
</span></span><span class="line"><span class="cl">I (96) boot: Enabling RNG early entropy source...
</span></span><span class="line"><span class="cl">I (101) boot: Partition Table:
</span></span><span class="line"><span class="cl">I (105) boot: ## Label            Usage          Type ST Offset   Length
</span></span><span class="line"><span class="cl">I (112) boot:  0 nvs              WiFi data        01 02 00010000 00004000
</span></span><span class="line"><span class="cl">I (120) boot:  1 otadata          OTA data         01 00 00014000 00002000
</span></span><span class="line"><span class="cl">I (127) boot:  2 phy_init         RF data          01 01 00016000 00001000
</span></span><span class="line"><span class="cl">I (135) boot:  3 factory          factory app      00 00 00020000 00100000
</span></span><span class="line"><span class="cl">I (142) boot:  4 ota_0            OTA app          00 10 00120000 00100000
</span></span><span class="line"><span class="cl">I (150) boot:  5 ota_1            OTA app          00 11 00220000 00100000
</span></span><span class="line"><span class="cl">I (157) boot:  6 nvs_key          NVS keys         01 04 00320000 00001000
</span></span><span class="line"><span class="cl">I (165) boot:  7 custom_nvs       WiFi data        01 02 00321000 00006000
</span></span><span class="line"><span class="cl">I (173) boot: End of partition table
</span></span><span class="line"><span class="cl">I (177) boot: Defaulting to factory image
</span></span><span class="line"><span class="cl">I (182) esp_image: segment 0: paddr=00020020 vaddr=3c090020 size=20e68h (134760) map
</span></span><span class="line"><span class="cl">I (217) esp_image: segment 1: paddr=00040e90 vaddr=3fc98700 size=047f8h ( 18424) load
</span></span><span class="line"><span class="cl">I (221) esp_image: segment 2: paddr=00045690 vaddr=40374000 size=0a988h ( 43400) load
</span></span><span class="line"><span class="cl">I (233) esp_image: segment 3: paddr=00050020 vaddr=42000020 size=81db8h (531896) map
</span></span><span class="line"><span class="cl">I (339) esp_image: segment 4: paddr=000d1de0 vaddr=4037e988 size=09cd0h ( 40144) load
</span></span><span class="line"><span class="cl">I (349) esp_image: segment 5: paddr=000dbab8 vaddr=00000000 size=04518h ( 17688)
</span></span><span class="line"><span class="cl">I (353) esp_image: Verifying image signature...
</span></span><span class="line"><span class="cl">I (354) secure_boot_v2: Verifying with RSA-PSS...
</span></span><span class="line"><span class="cl">I (360) secure_boot_v2: Signature verified successfully!
</span></span><span class="line"><span class="cl">I (371) boot: Loaded app from partition at offset 0x20000
</span></span><span class="line"><span class="cl">I (371) secure_boot_v2: enabling secure boot v2...
</span></span><span class="line"><span class="cl">I (374) secure_boot_v2: secure boot v2 is already enabled, continuing..
</span></span><span class="line"><span class="cl">I (382) boot: Checking flash encryption...
</span></span><span class="line"><span class="cl">I (386) flash_encrypt: flash encryption is enabled (0 plaintext flashes left)
</span></span><span class="line"><span class="cl">I (394) boot: Disabling RNG early entropy source...
</span></span><span class="line"><span class="cl">I (411) cpu_start: Multicore app
</span></span><span class="line"><span class="cl">I (421) cpu_start: Pro cpu start user code
</span></span><span class="line"><span class="cl">I (421) cpu_start: cpu freq: 160000000 Hz
</span></span><span class="line"><span class="cl">I (421) cpu_start: Application information:
</span></span><span class="line"><span class="cl">I (424) cpu_start: Project name:     wifi_softAP
</span></span><span class="line"><span class="cl">I (430) cpu_start: App version:      v5.2.2-520-g9d6583f763
</span></span><span class="line"><span class="cl">I (436) cpu_start: Compile time:     Aug 16 2024 15:58:16
</span></span><span class="line"><span class="cl">I (442) cpu_start: ELF file SHA256:  d89b197be...
</span></span><span class="line"><span class="cl">Warning: checksum mismatch between flashed and built applications. Checksum of built application is 6d559abf84b1d704bc99214866ff8708cf910cc472ec5ec9ca1557ca7d430710
</span></span><span class="line"><span class="cl">I (447) cpu_start: ESP-IDF:          v5.2.2-520-g9d6583f763
</span></span><span class="line"><span class="cl">I (454) cpu_start: Min chip rev:     v0.0
</span></span><span class="line"><span class="cl">I (458) cpu_start: Max chip rev:     v0.99
</span></span><span class="line"><span class="cl">I (463) cpu_start: Chip rev:         v0.1
</span></span><span class="line"><span class="cl">I (468) heap_init: Initializing. RAM available for dynamic allocation:
</span></span><span class="line"><span class="cl">I (475) heap_init: At 3FCA0AF8 len 00048C18 (291 KiB): RAM
</span></span><span class="line"><span class="cl">I (481) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
</span></span><span class="line"><span class="cl">I (487) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAM
</span></span><span class="line"><span class="cl">I (494) heap_init: At 600FE010 len 00001FD8 (7 KiB): RTCRAM
</span></span><span class="line"><span class="cl">I (501) spi_flash: detected chip: generic
</span></span><span class="line"><span class="cl">I (504) spi_flash: flash io: dio
</span></span><span class="line"><span class="cl">I (509) flash_encrypt: Flash encryption mode is RELEASE
</span></span><span class="line"><span class="cl">I (515) efuse: Batch mode of writing fields is enabled
</span></span><span class="line"><span class="cl">W (520) secure_boot: Unused SECURE_BOOT_DIGEST1 should be revoked. Fixing..
</span></span><span class="line"><span class="cl">W (528) secure_boot: Unused SECURE_BOOT_DIGEST2 should be revoked. Fixing..
</span></span><span class="line"><span class="cl">I (536) efuse: BURN BLOCK0
</span></span><span class="line"><span class="cl">I (541) efuse: BURN BLOCK0 - OK (all write block bits are set)
</span></span><span class="line"><span class="cl">I (546) efuse: Batch mode. Prepared fields are committed
</span></span><span class="line"><span class="cl">I (551) secure_boot: Fixed
</span></span><span class="line"><span class="cl">I (555) nvs_sec_provider: NVS Encryption - Registering Flash encryption-based scheme...
</span></span><span class="line"><span class="cl">I (564) sleep: Configure to isolate all GPIO pins in sleep state
</span></span><span class="line"><span class="cl">I (570) sleep: Enable automatic switching of GPIO sleep configuration
</span></span><span class="line"><span class="cl">I (578) main_task: Started on CPU0
</span></span><span class="line"><span class="cl">I (588) main_task: Calling app_main()
</span></span><span class="line"><span class="cl">I (628) nvs: NVS partition &#34;nvs&#34; is encrypted.
</span></span><span class="line"><span class="cl">I (628) wifi softAP: ESP_WIFI_MODE_AP
</span></span><span class="line"><span class="cl">I (628) pp: pp rom version: e7ae62f
</span></span><span class="line"><span class="cl">I (628) net80211: net80211 rom version: e7ae62f
</span></span><span class="line"><span class="cl">I (658) wifi:wifi driver task: 3fcaae94, prio:23, stack:6656, core=0
</span></span><span class="line"><span class="cl">I (658) wifi:wifi firmware version: e60360a19
</span></span><span class="line"><span class="cl">I (658) wifi:wifi certification version: v7.0
</span></span><span class="line"><span class="cl">I (658) wifi:config NVS flash: enabled
</span></span><span class="line"><span class="cl">I (658) wifi:config nano formating: disabled
</span></span><span class="line"><span class="cl">I (668) wifi:Init data frame dynamic rx buffer num: 32
</span></span><span class="line"><span class="cl">I (668) wifi:Init static rx mgmt buffer num: 5
</span></span><span class="line"><span class="cl">I (678) wifi:Init management short buffer num: 32
</span></span><span class="line"><span class="cl">I (678) wifi:Init dynamic tx buffer num: 32
</span></span><span class="line"><span class="cl">I (678) wifi:Init static tx FG buffer num: 2
</span></span><span class="line"><span class="cl">I (688) wifi:Init static rx buffer size: 1600
</span></span><span class="line"><span class="cl">I (688) wifi:Init static rx buffer num: 10
</span></span><span class="line"><span class="cl">I (698) wifi:Init dynamic rx buffer num: 32
</span></span><span class="line"><span class="cl">I (698) wifi_init: rx ba win: 6
</span></span><span class="line"><span class="cl">I (698) wifi_init: tcpip mbox: 32
</span></span><span class="line"><span class="cl">I (708) wifi_init: udp mbox: 6
</span></span><span class="line"><span class="cl">I (708) wifi_init: tcp mbox: 6
</span></span><span class="line"><span class="cl">I (708) wifi_init: tcp tx win: 5760
</span></span><span class="line"><span class="cl">I (718) wifi_init: tcp rx win: 5760
</span></span><span class="line"><span class="cl">I (718) wifi_init: tcp mss: 1440
</span></span><span class="line"><span class="cl">I (728) wifi_init: WiFi IRAM OP enabled
</span></span><span class="line"><span class="cl">I (728) wifi_init: WiFi RX IRAM OP enabled
</span></span><span class="line"><span class="cl">I (1258) phy_init: phy_version 680,a6008b2,Jun  4 2024,16:41:10
</span></span><span class="line"><span class="cl">W (1258) phy_init: failed to load RF calibration data (0x1102), falling back to full calibration
</span></span><span class="line"><span class="cl">W (1318) phy_init: saving new calibration data because of checksum failure, mode(2)
</span></span><span class="line"><span class="cl">I (1338) wifi:mode : softAP (68:b6:b3:4e:3f:f1)
</span></span><span class="line"><span class="cl">I (1388) wifi:Total power save buffer number: 16
</span></span><span class="line"><span class="cl">I (1388) wifi:Init max length of beacon: 752/752
</span></span><span class="line"><span class="cl">I (1398) wifi:Init max length of beacon: 752/752
</span></span><span class="line"><span class="cl">I (1398) wifi softAP: wifi_init_softap finished. SSID:myssid password:mypassword channel:1
</span></span><span class="line"><span class="cl">I (1398) esp_netif_lwip: DHCP server started on interface WIFI_AP_DEF with IP: 192.168.4.1
</span></span><span class="line"><span class="cl">I (1408) main_task: Returned from app_main()
</span></span></code></pre></div>
<h2 class="relative group">Conclusion 
    <div id="conclusion" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#conclusion" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Enabling Flash Encryption, Secure Boot V2, and NVS Encryption on the ESP32-S3 is critical for ensuring the security and integrity of your firmware and data. By following this guide, you can successfully configure and implement these features in both development and production environments. Utilizing tools like the Flash Download Tool simplifies the process, making it efficient and secure, especially in mass production settings. Always verify your configurations and ensure that the correct eFuse settings are applied, as they are irreversible.</p>
<p>For further exploration and testing, refer to the provided code examples and documentation links.</p>

<h2 class="relative group">References 
    <div id="references" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#references" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>For more information on implementing and verifying Flash Encryption, as well as practical examples, refer to the following resources:</p>
<ul>
<li>
<p><strong>Verify Flash Encryption Code</strong>: Detailed source code for verifying the Flash Encryption process can be found in the ESP-IDF repository:
<a href="https://github.com/espressif/esp-idf/blob/v5.2.1/components/bootloader_support/src/flash_encrypt.c" target="_blank">esp-idf/components/bootloader_support/src/flash_encrypt.c</a></p>
</li>
<li>
<p><strong>Flash Encryption Test Example</strong>: A comprehensive example demonstrating Flash Encryption in action is available in the ESP-IDF examples section:
<a href="https://github.com/espressif/esp-idf/tree/v5.2.1/examples/security/flash_encryption" target="_blank">esp-idf/examples/security/flash_encryption</a></p>
</li>
</ul>

        </div>
        
  
  <section class="flex flex-row flex-wrap justify-center pt-4 text-xl">
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http://localhost:1313/blog/flash-encryption-and-secure-boot/&amp;title=Using%20the%20ESP%20Flash%20Download%20Tool%20to%20finish%20the%20Flash%20Encryption%20&#43;%20Secure%20Boot%20&#43;%20NVS%20Encryption"
      title="Share on LinkedIn"
      aria-label="Share on LinkedIn"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>

  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://twitter.com/intent/tweet/?url=http://localhost:1313/blog/flash-encryption-and-secure-boot/&amp;text=Using%20the%20ESP%20Flash%20Download%20Tool%20to%20finish%20the%20Flash%20Encryption%20&#43;%20Secure%20Boot%20&#43;%20NVS%20Encryption"
      title="Tweet on Twitter"
      aria-label="Tweet on Twitter"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://reddit.com/submit/?url=http://localhost:1313/blog/flash-encryption-and-secure-boot/&amp;resubmit=true&amp;title=Using%20the%20ESP%20Flash%20Download%20Tool%20to%20finish%20the%20Flash%20Encryption%20&#43;%20Secure%20Boot%20&#43;%20NVS%20Encryption"
      title="Submit to Reddit"
      aria-label="Submit to Reddit"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z"/></svg>

  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://api.whatsapp.com/send?text=http://localhost:1313/blog/flash-encryption-and-secure-boot/&amp;resubmit=true&amp;title=Using%20the%20ESP%20Flash%20Download%20Tool%20to%20finish%20the%20Flash%20Encryption%20&#43;%20Secure%20Boot%20&#43;%20NVS%20Encryption"
      title="Share via WhatsApp"
      aria-label="Share via WhatsApp"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/></svg>

  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://t.me/share/url?url=http://localhost:1313/blog/flash-encryption-and-secure-boot/&amp;resubmit=true&amp;title=Using%20the%20ESP%20Flash%20Download%20Tool%20to%20finish%20the%20Flash%20Encryption%20&#43;%20Secure%20Boot%20&#43;%20NVS%20Encryption"
      title="Share via Telegram"
      aria-label="Share via Telegram"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M248,8C111.033,8,0,119.033,0,256S111.033,504,248,504,496,392.967,496,256,384.967,8,248,8ZM362.952,176.66c-3.732,39.215-19.881,134.378-28.1,178.3-3.476,18.584-10.322,24.816-16.948,25.425-14.4,1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25,5.342-39.5,3.652-3.793,67.107-61.51,68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608,69.142-14.845,10.194-26.894,9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7,18.45-13.7,108.446-47.248,144.628-62.3c68.872-28.647,83.183-33.623,92.511-33.789,2.052-.034,6.639.474,9.61,2.885a10.452,10.452,0,0,1,3.53,6.716A43.765,43.765,0,0,1,362.952,176.66Z"/></svg>

  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:1313/blog/flash-encryption-and-secure-boot/&amp;quote=Using%20the%20ESP%20Flash%20Download%20Tool%20to%20finish%20the%20Flash%20Encryption%20&#43;%20Secure%20Boot%20&#43;%20NVS%20Encryption"
      title="Share on Facebook"
      aria-label="Share on Facebook"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>

  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="mailto:?body=http://localhost:1313/blog/flash-encryption-and-secure-boot/&amp;subject=Using%20the%20ESP%20Flash%20Download%20Tool%20to%20finish%20the%20Flash%20Encryption%20&#43;%20Secure%20Boot%20&#43;%20NVS%20Encryption"
      title="Send via email"
      aria-label="Send via email"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>

  </span>


    </a>
      
    
  </section>



        
          <script src="https://giscus.app/client.js"
      data-repo="espressif/developer-portal"
      data-repo-id="R_kgDOLPlldw"
      data-category="General"
      data-category-id="DIC_kwDOLPlld84CdKDO"
      data-mapping="title"
      data-strict="0"
      data-reactions-enabled="1"
      data-emit-metadata="0"
      data-input-position="bottom"
      data-theme="light"
      data-lang="en"
      crossorigin="anonymous"
      async>
    </script>
        

        


<h2 class="mt-8 text-2xl font-extrabold mb-10">Related</h2>
<section class="w-full grid gap-4 sm:grid-cols-2 md:grid-cols-3">
  
  

  <a href="/blog/easily-develop-graphical-user-interfaces-with-mcus/" class="min-w-full">
    
    <div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative">

      
        
        <div class="w-full thumbnail_card_related nozoom" style="background-image:url(/blog/easily-develop-graphical-user-interfaces-with-mcus/featured_hu_e33268949f50847b.webp);"></div>
        
      

      <div class="px-6 py-4">

        
        <div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral"
          href="/blog/easily-develop-graphical-user-interfaces-with-mcus/">Easily Develop Graphical User Interfaces (GUIs) with Espressif Microcontrollers (MCUs)</div>
        

        <div class="text-sm text-neutral-500 dark:text-neutral-400">
          











  







  













<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2024-09-17T00:00:00&#43;00:00">17 September 2024</time><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">4 mins</span>
  

  
  
</div>





<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/esp32/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    ESP32
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/esp-idf/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    ESP-IDF
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/gui/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    GUI
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/embedded-wizard/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Embedded Wizard
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/esp32-s3/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    ESP32-S3
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/esp32-s2/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    ESP32-S2
  </span>
</span>
  </span>
  
  
  
  
</div>







        </div>

        
        <div class="py-1 prose dark:prose-invert">
          
        </div>
        
      </div>
      <div class="px-6 pt-4 pb-2">

      </div>
    </div>
  </a>
  
  

  <a href="/blog/getting-started-with-esp-idf/" class="min-w-full">
    
    <div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative">

      
        
        <div class="w-full thumbnail_card_related nozoom" style="background-image:url(/blog/getting-started-with-esp-idf/featured_hu_2993965e8e3b920a.webp);"></div>
        
      

      <div class="px-6 py-4">

        
        <div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral"
          href="/blog/getting-started-with-esp-idf/">Getting Started With ESP-IDF</div>
        

        <div class="text-sm text-neutral-500 dark:text-neutral-400">
          











  







  













<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2024-07-31T00:00:00&#43;00:00">31 July 2024</time><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">8 mins</span>
  

  
  
</div>





<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/esp32/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    ESP32
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/esp-idf/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    ESP-IDF
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/tutorial/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Tutorial
  </span>
</span>
  </span>
  
  
  
  
</div>







        </div>

        
        <div class="py-1 prose dark:prose-invert">
          
        </div>
        
      </div>
      <div class="px-6 pt-4 pb-2">

      </div>
    </div>
  </a>
  
  

  <a href="/blog/getting-started-with-wifi-on-esp-idf/" class="min-w-full">
    
    <div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative">

      
        
        <div class="w-full thumbnail_card_related nozoom" style="background-image:url(/blog/getting-started-with-wifi-on-esp-idf/featured_hu_df57e5ad1301be89.webp);"></div>
        
      

      <div class="px-6 py-4">

        
        <div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral"
          href="/blog/getting-started-with-wifi-on-esp-idf/">Getting Started with Wi-Fi on ESP-IDF</div>
        

        <div class="text-sm text-neutral-500 dark:text-neutral-400">
          











  







  













<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2024-07-31T00:00:00&#43;00:00">31 July 2024</time><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">18 mins</span>
  

  
  
</div>





<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/esp32/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    ESP32
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/esp-idf/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    ESP-IDF
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/wi-fi/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Wi-Fi
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/tutorial/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Tutorial
  </span>
</span>
  </span>
  
  
  
  
</div>







        </div>

        
        <div class="py-1 prose dark:prose-invert">
          
        </div>
        
      </div>
      <div class="px-6 pt-4 pb-2">

      </div>
    </div>
  </a>
  
</section>


      </div>

    
     <script>
        var oid = "views_blog\/flash-encryption-and-secure-boot\/index.md"
        var oid_likes = "likes_blog\/flash-encryption-and-secure-boot\/index.md"
      </script>
      
      
      
      <script type="text/javascript" src="/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js" integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q&#43;oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script>

    </section>
  <footer class="pt-8 max-w-prose print:hidden">

    
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="flex group mr-3" href="/blog/wireless-connectivity-solutions-for-esp32-p4/">
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Wireless Connectivity Solutions for ESP32-P4</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2024-09-20T00:00:00&#43;00:00">20 September 2024</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="flex text-right group ml-3" href="/blog/using-esp-bsp-with-devkits/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Using ESP-BSP with DevKits</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2024-09-27T00:00:00&#43;00:00">27 September 2024</time>
                  
                </span>
              </span>
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
            </a>
          
        </span>
      </div>
    </div>
  



    

    

  </footer>
</article>

          <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top" title="Scroll to top">
    &uarr;
  </a>
</div>
        </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
    <nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400">
      <ul class="flex flex-col list-none sm:flex-row">
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="/tags/"
            title="Tags">
            
            Tags
          </a>
        </li>
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="/authors/"
            title="Developer Portal Authors">
            
            Authors
          </a>
        </li>
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="/pages/about/"
            title="About">
            
            About
          </a>
        </li>
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="/pages/contribution-guide/"
            title="Contribution guide">
            
            Contribute
          </a>
        </li>
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="https://github.com/espressif/developer-portal/"
            title="">
            
            <span >
                

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>


            </span>
            
            
          </a>
        </li>
        
      </ul>
    </nav>
    
  
  <div class="flex items-center justify-between">

    
    
    <p class="text-sm text-neutral-500 dark:text-neutral-500">
      &copy;
      2025
      John Lee
    </p>
    

    
    
    <p class="text-xs text-neutral-500 dark:text-neutral-400">
      
      
      Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
    </p>
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script>
  
  
  <script type="text/javascript" src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js" integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="http://localhost:1313/"
  style="z-index:500"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)"
      >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

      </div>

    </div> 

    <script
      async
      src="https://widget.kapa.ai/kapa-widget.bundle.js"
      data-website-id="10bca275-31d7-43dc-a7d7-160913512ad4"
      data-project-name="Developer Portal"
      data-project-color="#38393a"
      data-project-logo="/logo-ai.webp"
      data-button-image="/logo-ai-new.webp"
      data-modal-disclaimer="This custom large language model (LLM), trained on official documentation from espressif.com, is designed to provide technical support and answers related to Espressif’s products and services. Give it a try, share your thoughts, and let us know your feedback—we truly appreciate it! 
\n\n*Note*: AI-generated information may be incomplete or inaccurate. Always verify critical information with official sources."
      data-modal-example-questions="How do I put an ESP32-DevkitC into download mode?"
      data-button-text-font-size="0px"
      data-button-border-radius="50%"
      data-button-bg-color="#38393a"
      data-button-border="#38393a"
      data-button-height="52px"
      data-button-width="52px"
      data-button-animation-enabled="false"
      data-button-image-height="100%"
      data-button-image-width="100%"
      data-button-padding="0"
      data-button-hover-animation-enabled="false"
      data-button-position-right="16px"
      data-button-position-bottom="96px"
      data-button-box-shadow="0px 6px 12px 1px rgba(0,0,0,0.16)"
      data-bot-protection-mechanism="hcaptcha"
    ></script>
  </body>
</html>
