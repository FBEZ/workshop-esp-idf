<!DOCTYPE html>
<html lang="en" dir="ltr"
  class="scroll-smooth"
  data-default-appearance="light"
  data-auto-appearance="false"><head>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="en" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>ESP-IDF Adv. - Lecture 4 &middot; Workshops</title>
  <meta name="title" content="ESP-IDF Adv. - Lecture 4 &middot; Workshops" />
  
  <meta name="description" content="In this article, we explore the advanced features required for security: OTA update, flash encryption, and secure bootloader" />
  
  
  
  <link rel="canonical" href="https://fbez.github.io/workshop-esp-idf/workshops/esp-idf-advanced/lecture-4/" />
  
  
  
  
  
  
  
  
  
  
  
  
  

  <link type="text/css" rel="stylesheet" href="/workshop-esp-idf/css/main.bundle.min.07ac84810cad0ed08da8b416798009536fa2093f146cd2365bed74f9139c75a1a7fdbca3b4d77a97a90689aba4635d5467091cff70733f074b4356478b66bb9c.css"
    integrity="sha512-B6yEgQytDtCNqLQWeYAJU2&#43;iCT8UbNI2W&#43;10&#43;ROcdaGn/byjtNd6l6kGiaukY11UZwkc/3BzPwdLQ1ZHi2a7nA==" />
  
  
  <script type="text/javascript" src="/workshop-esp-idf/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/workshop-esp-idf/js/main.bundle.min.829f1a320d5c2d64e9e0220d20960155b426b094cfb2440e4938166a93f52805a398e64abc400353e7a0b8ea9cb75083d6dd5238a5d4a59fd0cd01008d407301.js"
    integrity="sha512-gp8aMg1cLWTp4CINIJYBVbQmsJTPskQOSTgWapP1KAWjmOZKvEADU&#43;eguOqct1CD1t1SOKXUpZ/QzQEAjUBzAQ==" data-copy="" data-copied=""></script>
  
  
  
  <script src="/workshop-esp-idf/lib/zoom/zoom.min.f592a181a15d2a5b042daa7f746c3721acf9063f8b6acd175d989129865a37d400ae0e85b640f9ad42cd98d1f8ad30931718cf8811abdcc5fcb264400d1a2b0c.js" integrity="sha512-9ZKhgaFdKlsELap/dGw3Iaz5Bj&#43;Las0XXZiRKYZaN9QArg6FtkD5rULNmNH4rTCTFxjPiBGr3MX8smRADRorDA=="></script>
  
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/workshop-esp-idf/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/workshop-esp-idf/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/workshop-esp-idf/favicon-16x16.png" />
  <link rel="manifest" href="/workshop-esp-idf/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:url" content="https://fbez.github.io/workshop-esp-idf/workshops/esp-idf-advanced/lecture-4/">
  <meta property="og:site_name" content="Workshops">
  <meta property="og:title" content="ESP-IDF Adv. - Lecture 4">
  <meta property="og:description" content="In this article, we explore the advanced features required for security: OTA update, flash encryption, and secure bootloader">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="workshops">
    <meta property="article:published_time" content="2025-08-05T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-08-05T00:00:00+00:00">
      <meta property="og:see_also" content="https://fbez.github.io/workshop-esp-idf/workshops/esp-idf-advanced/assignment-1-1/">
      <meta property="og:see_also" content="https://fbez.github.io/workshop-esp-idf/workshops/esp-idf-advanced/assignment-1-2/">
      <meta property="og:see_also" content="https://fbez.github.io/workshop-esp-idf/workshops/esp-idf-advanced/assignment-1-3/">
      <meta property="og:see_also" content="https://fbez.github.io/workshop-esp-idf/workshops/esp-idf-advanced/assignment-2-1/">
      <meta property="og:see_also" content="https://fbez.github.io/workshop-esp-idf/workshops/esp-idf-advanced/assignment-2-2/">
      <meta property="og:see_also" content="https://fbez.github.io/workshop-esp-idf/workshops/esp-idf-advanced/assignment-3-1/">
      <meta property="og:see_also" content="https://fbez.github.io/workshop-esp-idf/workshops/esp-idf-advanced/assignment-3-2/">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="ESP-IDF Adv. - Lecture 4">
  <meta name="twitter:description" content="In this article, we explore the advanced features required for security: OTA update, flash encryption, and secure bootloader">

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Workshops",
    "name": "ESP-IDF Adv. - Lecture 4",
    "headline": "ESP-IDF Adv. - Lecture 4",
    
    "abstract": "In this article, we explore the advanced features required for security: OTA update, flash encryption, and secure bootloader",
    "inLanguage": "en",
    "url" : "https:\/\/fbez.github.io\/workshop-esp-idf\/workshops\/esp-idf-advanced\/lecture-4\/",
    "author" : {
      "@type": "Person",
      "name": "John Lee"
    },
    "copyrightYear": "2025",
    "dateCreated": "2025-08-05T00:00:00\u002b00:00",
    "datePublished": "2025-08-05T00:00:00\u002b00:00",
    
    "dateModified": "2025-08-05T00:00:00\u002b00:00",
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "2073"
  }]
  </script>


  
  
  <meta name="author" content="John Lee" />
  
  
  
  <link href="https://www.linkedin.com/company/espressif-systems" rel="me" />
  
  
  <link href="https://twitter.com/EspressifSystem" rel="me" />
  
  
  <link href="https://www.instagram.com/espressif_systems_official" rel="me" />
  
  
  <link href="https://blog.espressif.com/" rel="me" />
  
  
  <link href="https://github.com/espressif" rel="me" />
  
  
  <link href="https://espressif.com/" rel="me" />
  
  
  
  

<script src="/workshop-esp-idf/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>






















  


  

  

  
  

<script async src="https://www.googletagmanager.com/gtag/js?id=G-K9NTMXPGN3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-K9NTMXPGN3');
</script>



  
  
  <meta name="theme-color"/>
  
  
  
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script>

    const firebaseConfig = {
      apiKey: "",
      authDomain: "",
      projectId: "",
      storageBucket: "",
      messagingSenderId: "",
      appId: "",
      measurementId: ""
    };

    var app = firebase.initializeApp(firebaseConfig);
    var db = firebase.firestore();
    var auth = firebase.auth();

  </script>
  
  
</head>
<body class="bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral">

    
    <div class="flex flex-col min-h-screen w-full max-w-7xl mx-auto px-6 sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">

      <div id="the-top" class="absolute flex self-center">
        <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
          href="#main-content">
          <span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content
        </a>
      </div>

      
      
      
      
        <div class="min-h-[148px]"></div>
<div class="fixed inset-x-0 pl-[24px] pr-[24px] bg-neutral dark:bg-neutral-800" style="z-index:100">
  <div class="relative max-w-[64rem] ml-auto mr-auto">
    <div style="padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px"
    class="main-menu flex flex-wrap items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3">

    
    
    
     

    <div>
        <a href="/workshop-esp-idf/" class="flex">
            <span class="sr-only">Workshops</span>

            <img src="/workshop-esp-idf/img/espressif_logo_contour.png"
                width="192"
                height="39.5"
                class="logo max-h-[0.625rem] max-w-[0.625rem] object-scale-down object-left nozoom"
                alt="Workshops" />
        </a>
    </div>
    

    <div class="flex flex-1 items-center justify-between w-full md:w-auto">
        <nav class="flex space-x-3">

            
            <a href="/workshop-esp-idf/" class="text-base font-medium text-gray-500 hover:text-gray-900">Workshops</a>
            

        </nav>
        <nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12">

            
            
            
  <a href="/workshop-esp-idf/workshops/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="Workshops">
        Workshops
    </p>
</a>



            
             
  <div>
  <div class="cursor-pointer flex items-center nested-menu">
    
    <a  class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="">
      Quick Links
    </a>
    <span>
      

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


    </span>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="https://espressif.com" 
          target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Espressif Site
          </p>
        </a>
        
        <a href="https://documentation.espressif.com/en/home" 
          target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Documents
          </p>
        </a>
        
        <a href="https://components.espressif.com/" 
          target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Component Registry
          </p>
        </a>
        
        <a href="https://devcon.espressif.com/" 
          target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            DevCon
          </p>
        </a>
        
        <a href="https://esp32.com" 
          target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            ESP32 Forum
          </p>
        </a>
        
        <a href="https://products.espressif.com/" 
          target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Product Selector
          </p>
        </a>
        
        <a href="https://www.reddit.com/r/esp32/" 
          target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Reddit
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
            

            


            
            <button id="search-button" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400 h-12"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            


            
            

        </nav>
    </div>

    <div class="w-full flex flex-wrap justify-between md:hidden mt-2 space-y-2">
        <div class="flex items-center space-x-5 ml-auto">

            


            
            <button id="search-button-mobile" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            

            
            

            <label id="menu-button" class="block">
                
                <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>

  </span>


                </div>
                <div id="menu-wrapper" style="padding-top:5px;"
                    class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
                    <ul
                        class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl menu-ul">

                        <li id="menu-close-button">
                            <span
                                class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400 menu-close">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


                            </span>
                        </li>

                        

                        
  <li class="mt-1">
    <a href="/workshop-esp-idf/workshops/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="Workshops">
            Workshops
        </p>
    </a>
</li>




                        

                         
  <li class="mt-1">
    <a href="" class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            Quick Links
        </p>
        <span>
            

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


        </span>
    </a>
</li>

<li class="mt-1">
    <a href="https://espressif.com"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Espressif Site
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="https://documentation.espressif.com/en/home"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Documents
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="https://components.espressif.com/"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Component Registry
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="https://devcon.espressif.com/"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            DevCon
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="https://esp32.com"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            ESP32 Forum
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="https://products.espressif.com/"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Product Selector
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="https://www.reddit.com/r/esp32/"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Reddit
        </p>
    </a>
</li>

<li class="mb-2"></li>




                        

                    </ul>
                    
                    

                </div>
            </label>
        </div>
    </div>
</div>




<script>
    (function () {
        var $mainmenu = $('.main-menu');
        var path = window.location.pathname;
        $mainmenu.find('a[href="' + path + '"]').each(function (i, e) {
            $(e).children('p').addClass('active');
        });
        
        document.querySelectorAll('#menu-wrapper .mt-1').forEach((parent) => {
            parent.style.width = '7rem';
            parent.style.textAlign = 'left';
            if (parent.querySelector('span') !== null) {
                parent.addEventListener("click", function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const root = document.querySelector('#menu-wrapper');
                    root.style.display = 'block';
                    if (this.classList.contains('menu-show')) {
                        this.classList.remove('menu-show');
                    } else {
                        this.classList.add('menu-show');
                    }
                    
                    var nextLiElements = [];
                    var nextSibling = this.nextSibling;
                    while (nextSibling) {
                        if (nextSibling.nodeType === 1 && nextSibling.classList.contains('mb-2')) {
                            break;
                        }
                        if (nextSibling.nodeType === 1 && nextSibling.tagName.toLowerCase() === 'li') {
                            nextLiElements.push(nextSibling);
                        }
                        nextSibling = nextSibling.nextSibling;
                    }

                    nextLiElements.forEach(function(nextLi) {
                        nextLi.style.display = parent.classList.contains('menu-show') ? 'block' : 'none'
                    });
                })
            }
            if (parent.querySelector('a')?.querySelector('p.text-sm')) {
                parent.style.display = 'none';
            }
        });
        document.querySelectorAll('#menu-wrapper .mb-2').forEach((node) => {
            node.style.display = 'none';
        });
    })();
</script>




  <link rel="stylesheet" href="https://fbez.github.io/workshop-esp-idf/css/styles.css" integrity="">


  </div>
</div>

      

      <div class="relative flex flex-col grow">
        <main id="main-content" class="grow pb-[120px]">
          


<article>
  
  
  
  
  
  

  
  

  <header id="single_header" class="mt-5 max-w-prose">
    
    <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
      ESP-IDF Adv. - Lecture 4
    </h1>
    <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
      





  
  







  







  











  



<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2025-08-05T00:00:00&#43;00:00">5 August 2025</time><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">10 mins</span><span class="px-2 text-primary-500">&middot;</span>


<script type="text/javascript" src="/workshop-esp-idf/js/zen-mode.min.2a0a1375509c03daf41c53a9831aa2d560895b7a2528c3eb3b56e7b11a135c7529e49727162a053b6193be8340270a8342f42c69f3d7e262ae54bc248eaac8f5.js" integrity="sha512-KgoTdVCcA9r0HFOpgxqi1WCJW3olKMPrO1bnsRoTXHUp5JcnFioFO2GTvoNAJwqDQvQsafPX4mKuVLwkjqrI9Q=="></script>

<span class="mb-[2px]">
    <span id="zen-mode-button"
          class="text-lg hover:text-primary-500"
          title="Enable zen mode"
          data-title-i18n-disable="Enable zen mode"
          data-title-i18n-enable="Disable zen mode">
        <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="50px" height="50px">
    <path fill="currentColor" d="M 12.980469 4 C 9.1204688 4 5.9804688 7.14 5.9804688 11 L 6 26 L 9.9804688 26 L 9.9804688 11 C 9.9804688 9.35 11.320469 8 12.980469 8 L 40.019531 8 C 41.679531 8 43.019531 9.35 43.019531 11 L 43.019531 39 C 43.019531 40.65 41.679531 42 40.019531 42 L 29 42 C 29 43.54 28.420938 44.94 27.460938 46 L 40.019531 46 C 43.879531 46 47.019531 42.86 47.019531 39 L 47.019531 11 C 47.019531 7.14 43.879531 4 40.019531 4 L 12.980469 4 z M 7 28 C 4.794 28 3 29.794 3 32 L 3 42 C 3 44.206 4.794 46 7 46 L 23 46 C 25.206 46 27 44.206 27 42 L 27 32 C 27 29.794 25.206 28 23 28 L 7 28 z M 7 32 L 23 32 L 23.001953 42 L 7 42 L 7 32 z"/>
</svg>
  </span>

</span>
    </span>
</span>
  

  
  
</div>





<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</div>







    </div>

    
    
    
    
    

    

    

      

    

      

    

  </header>

  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">

     <div
      class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8">
      <div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]">

         <details open class="toc-right mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#partition-tables">Partition tables</a>
      <ul>
        <li><a href="#structure-and-location">Structure and Location</a></li>
        <li><a href="#built-in-partition-schemes">Built-in Partition Schemes</a></li>
        <li><a href="#custom-partition-tables">Custom Partition Tables</a></li>
      </ul>
    </li>
    <li><a href="#over-the-air-ota-updates-on-espressif-devices">Over-the-Air (OTA) Updates on Espressif Devices</a>
      <ul>
        <li><a href="#implementing-ota-with-esp-idf">Implementing OTA with ESP-IDF</a>
          <ul>
            <li><a href="#example-code-snippet-using-esp_https_ota">Example code snippet using <code>esp_https_ota</code></a></li>
            <li><a href="#ota-partition-table-layout">OTA partition table layout</a></li>
            <li><a href="#otadata-partition">otadata partition</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#flash-encryption">Flash encryption</a>
      <ul>
        <li><a href="#how-flash-encryption-works">How Flash Encryption Works</a></li>
        <li><a href="#development-mode-and-release-mode">Development mode and release mode</a></li>
        <li><a href="#important-usage-notes">Important usage notes</a></li>
      </ul>
    </li>
    <li><a href="#secure-bootloader">Secure Bootloader</a>
      <ul>
        <li><a href="#how-to-use-secure-bootloader">How to Use Secure Bootloader</a></li>
      </ul>
    </li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#partition-tables">Partition tables</a>
      <ul>
        <li><a href="#structure-and-location">Structure and Location</a></li>
        <li><a href="#built-in-partition-schemes">Built-in Partition Schemes</a></li>
        <li><a href="#custom-partition-tables">Custom Partition Tables</a></li>
      </ul>
    </li>
    <li><a href="#over-the-air-ota-updates-on-espressif-devices">Over-the-Air (OTA) Updates on Espressif Devices</a>
      <ul>
        <li><a href="#implementing-ota-with-esp-idf">Implementing OTA with ESP-IDF</a>
          <ul>
            <li><a href="#example-code-snippet-using-esp_https_ota">Example code snippet using <code>esp_https_ota</code></a></li>
            <li><a href="#ota-partition-table-layout">OTA partition table layout</a></li>
            <li><a href="#otadata-partition">otadata partition</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#flash-encryption">Flash encryption</a>
      <ul>
        <li><a href="#how-flash-encryption-works">How Flash Encryption Works</a></li>
        <li><a href="#development-mode-and-release-mode">Development mode and release mode</a></li>
        <li><a href="#important-usage-notes">Important usage notes</a></li>
      </ul>
    </li>
    <li><a href="#secure-bootloader">Secure Bootloader</a>
      <ul>
        <li><a href="#how-to-use-secure-bootloader">How to Use Secure Bootloader</a></li>
      </ul>
    </li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
  </div>
</details>


<script>
  (function () {
    var $toc = $('#TableOfContents');
    if ($toc.length > 0) {
      var $window = $(window);

      function onScroll() {
        var currentScroll = $window.scrollTop();
        var h = $('.anchor');
        var id = "";
        h.each(function (i, e) {
          e = $(e);
          if (e.offset().top - $(window).height()/3 <= currentScroll) {
            id = e.attr('id');
          }
        });
        var active = $toc.find('a.active');
        if (active.length == 1 && active.eq(0).attr('href') == '#' + id) return true;

        active.each(function (i, e) {
          
            $(e).removeClass('active');
          
        });
        $toc.find('a[href="#' + id + '"]').addClass('active')
        $toc.find('a[href="#' + id + '"]').parentsUntil('#TableOfContents').each(function (i, e) {
          $(e).children('a').parents('ul').show();
        });
      }

      $window.on('scroll', onScroll);
      $(document).ready(function () {
        
        onScroll();
      });
    }
  })();
</script>

   </div>
      </div>
      

      <div class="min-w-0 min-h-0 max-w-fit">

        
          <div class="article-summary max-w-prose mb-30">
            In this article, we explore the advanced features required for security: OTA update, flash encryption, and secure bootloader
          </div>
        

        <div class="article-content max-w-prose mb-20">
          
<h2 class="relative group">Introduction 
    <div id="introduction" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#introduction" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>As IoT devices become more widespread in homes, industries, and critical infrastructure, the need for robust security is growing rapidly. These connected systems often handle personal data, control physical processes, and operate in untrusted environments—making them attractive targets for attackers.</p>
<p>In response to these risks, new regulations like the EU’s <strong>Radio Equipment Directive Delegated Act (RED DA)</strong> are raising the bar for IoT security, requiring manufacturers to implement stronger protections by design.</p>
<p>To meet these evolving demands, three core technologies have become staples of modern IoT security: <strong>over-the-air (OTA) updates</strong>, <strong>flash encryption</strong>, and <strong>secure bootloaders</strong>.</p>
<ul>
<li>
<p><strong>OTA updates</strong> allow devices to receive firmware updates remotely, enabling timely security patches and feature enhancements without requiring physical access. This is crucial for maintaining device integrity over its lifecycle, especially once deployed in the field.</p>
</li>
<li>
<p><strong>Flash encryption</strong> protects data stored in the device’s flash memory by encrypting it at the hardware level. This ensures that sensitive information (such as cryptographic keys or user data) remains inaccessible even if an attacker gains physical access to the device.</p>
</li>
<li>
<p><strong>Secure bootloaders</strong> verify the integrity and authenticity of firmware before execution. By checking digital signatures during the boot process, they prevent unauthorized or malicious code from running on the device</p>
</li>
</ul>

  
  
  
  



<div
  
    class="flex px-4 py-3 rounded-md"
    style="background-color: #b3e0f2"
  >

  <span
    
      class="ltr:pr-3 rtl:pl-3 flex items-center"
      style="color: #04a5e5"
    >

    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 128c17.67 0 32 14.33 32 32c0 17.67-14.33 32-32 32S224 177.7 224 160C224 142.3 238.3 128 256 128zM296 384h-80C202.8 384 192 373.3 192 360s10.75-24 24-24h16v-64H224c-13.25 0-24-10.75-24-24S210.8 224 224 224h32c13.25 0 24 10.75 24 24v88h16c13.25 0 24 10.75 24 24S309.3 384 296 384z"/></svg>

  </span>


  </span>

  <span
    
      class="dark:text-neutral-300"
    >In the following assignments, you will enable these features on the hardware. If you don&rsquo;t feel comfortable, you can follow the developer portal article to <a href="https://developer.espressif.com/blog/trying-out-esp32-c3s-security-features-using-qemu/" target="_blank">emulate security features using QEMU</a>.</span>
</div>

<p>Together, these features form a foundational security layer, helping developers build devices that are compliant with new regulations and resilient against real-world threats.</p>
<p>In this article we&rsquo;ll see what each of these features. To use the OTA we need to first change the partition table. For this reason, before we start, we need to spend a few words about partition tables.</p>

<h2 class="relative group">Partition tables 
    <div id="partition-tables" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#partition-tables" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>The partition table defines how the flash memory is organized, specifying where applications, data, filesystems, and other resources are stored. This logical separation allows developers to manage firmware, persistent data, and update mechanisms efficiently.</p>
<p>ESP-IDF uses partition tables because they enable:</p>
<ul>
<li><strong>Separation of code and data:</strong> Application and persistent data are isolated, allowing firmware updates without erasing user data.</li>
<li><strong>OTA updates:</strong> Multiple app partitions and OTA data management for robust remote firmware upgrades.</li>
<li><strong>Flexible storage:</strong> Support for filesystems and custom data regions for certificates, logs, or configuration.</li>
</ul>

<h3 class="relative group">Structure and Location 
    <div id="structure-and-location" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#structure-and-location" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>The partition table is typically flashed at offset <code>0x8000</code> in the device’s SPI flash. It occupies <code>0xC00</code> bytes, supporting up to 95 entries, and includes an MD5 checksum for integrity verification. The table itself takes up a full 4 KB flash sector, so any partition following it must start at least at offset <code>0x9000</code>, depending on the table size and alignment requirements. Each entry in the table includes a name (label), type (such as app or data), subtype, offset, and size in flash memory.</p>

<h3 class="relative group">Built-in Partition Schemes 
    <div id="built-in-partition-schemes" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#built-in-partition-schemes" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>ESP-IDF provides several predefined partition tables for common use cases, selectable via <code>menuconfig</code>:</p>
<ul>
<li><strong>Single factory app, no OTA</strong>: Contains a single application partition and basic data partitions (NVS, PHY init).</li>
<li><strong>Factory app, two OTA definitions</strong>: Adds support for over-the-air (OTA) updates, with two OTA app partitions and an OTA data slot. We will use this predefined partition table in the <a href="../assignment-4-1/">assignment 4.1</a></li>
</ul>
<p>For example, the &ldquo;Factory app, two OTA definitions&rdquo; scheme typically looks like this:</p>
<pre tabindex="0"><code>Name      Type   SubType  Offset    Size
nvs       data   nvs      0x9000    0x4000
otadata   data   ota      0xd000    0x2000
phy_init  data   phy      0xf000    0x1000
factory   app    factory  0x10000   1M
ota_0     app    ota_0    0x110000  1M
ota_1     app    ota_1    0x210000  1M
</code></pre><p>The bootloader uses the partition table to locate the application to boot and the data regions for NVS, PHY calibration, and OTA management.</p>

<h3 class="relative group">Custom Partition Tables 
    <div id="custom-partition-tables" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#custom-partition-tables" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>For advanced use cases, developers can define custom partition tables in CSV format. This allows for additional partitions, such as extra NVS storage, SPIFFS, or FAT filesystems, tailored to the application’s needs. The custom CSV is specified in the project configuration, and ESP-IDF tools will flash and use it accordingly.</p>

  
  
  
  



<div
  
    class="flex px-4 py-3 rounded-md"
    style="background-color: #9cccce"
  >

  <span
    
      class="ltr:pr-3 rtl:pl-3 flex items-center"
      style="color: #179299"
    >

    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM191.4 .0132C89.44 .3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.61 288.9-.2837 191.4 .0132zM192 96.01c-44.13 0-80 35.89-80 79.1C112 184.8 104.8 192 96 192S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1c8.844 0 16 7.159 16 16S200.8 96.01 192 96.01z"/></svg>

  </span>


  </span>

  <span
    
      class="dark:text-neutral-300"
    >Use custom partition table to increase the size of OTA partitions to the maximum available space (after all other partition sizes are known): This way you have the most space available when doing OTA updates in the future!</span>
</div>

<p>We will test this option in <a href="../assignment-4-2/">assignment 4.2</a>.</p>

<h2 class="relative group">Over-the-Air (OTA) Updates on Espressif Devices 
    <div id="over-the-air-ota-updates-on-espressif-devices" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#over-the-air-ota-updates-on-espressif-devices" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Over-the-Air (OTA) updates allow you to remotely upgrade the firmware of embedded devices without requiring physical access. This capability is especially important for IoT deployments, where devices are often distributed across wide or hard-to-reach areas. OTA ensures your devices stay up to date with the latest features, bug fixes, and security patches long after they&rsquo;ve been deployed.</p>
<p>In the OTA process, the Espressif device downloads the firmware from a given location, as depicted in Fig.1.</p>


  

<figure><img src="../assets/lecture_4_ota_diagram.webp"
    alt="Fig.1 &ndash; OTA basic diagram" width="350"><figcaption>
      <p>Fig.1 &ndash; OTA basic diagram</p>
    </figcaption>
</figure>


<p>Key benefits of OTA include:</p>
<ul>
<li><strong>Remote maintenance:</strong> Update firmware without on-site visits.</li>
<li><strong>Improved security:</strong> Quickly patch known vulnerabilities.</li>
<li><strong>Feature updates:</strong> Seamlessly deliver new functionality to users.</li>
<li><strong>Lower maintenance costs:</strong> Avoid expensive manual recalls or servicing.</li>
</ul>

<h3 class="relative group">Implementing OTA with ESP-IDF 
    <div id="implementing-ota-with-esp-idf" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#implementing-ota-with-esp-idf" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>ESP-IDF offers built-in support for OTA through two main methods:</p>
<ul>
<li><strong>Native API</strong>: Using the <code>app_update</code> component for full control over the update process.</li>
<li><strong>Simplified API</strong>: Using the <code>esp_https_ota</code> component for a higher-level interface that handles HTTPS download and flashing automatically.</li>
</ul>
<p>In most cases, application needs to interact with public interface of <code>esp_https_ota</code> and <code>app_update</code> components only.
In Fig.2 you can find a simplified diagram of the OTA key components.</p>


  

<figure><img src="../assets/lecture_4_ota.webp"
    alt="Fig.2 &ndash; OTA key components (simplified diagram)" height="500"><figcaption>
      <p>Fig.2 &ndash; OTA key components (simplified diagram)</p>
    </figcaption>
</figure>


<p>A typical OTA workflow includes:</p>
<ol>
<li>Downloading the new firmware image over Wi-Fi or Ethernet.</li>
<li>Writing it to an unused OTA partition in flash.</li>
<li>Updating the OTA data partition to mark the new firmware as the active version.</li>
<li>Rebooting the device to apply the update.</li>
</ol>

  
  
  
  



<div
  
    class="flex px-4 py-3 rounded-md"
    style="background-color: #9cccce"
  >

  <span
    
      class="ltr:pr-3 rtl:pl-3 flex items-center"
      style="color: #179299"
    >

    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM191.4 .0132C89.44 .3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.61 288.9-.2837 191.4 .0132zM192 96.01c-44.13 0-80 35.89-80 79.1C112 184.8 104.8 192 96 192S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1c8.844 0 16 7.159 16 16S200.8 96.01 192 96.01z"/></svg>

  </span>


  </span>

  <span
    
      class="dark:text-neutral-300"
    >To use OTA, you must add an appropriate partition table.</span>
</div>


<h4 class="relative group">Example code snippet using <code>esp_https_ota</code> 
    <div id="example-code-snippet-using-esp_https_ota" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#example-code-snippet-using-esp_https_ota" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>Using <code>esp_https_ota</code> is straightforward and typically requires just a few lines of code.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;esp_https_ota.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">esp_err_t</span> <span class="nf">do_firmware_upgrade</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">esp_http_client_config_t</span> <span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="n">url</span> <span class="o">=</span> <span class="s">&#34;https://example.com/firmware.bin&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="n">cert_pem</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">server_cert_pem_start</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="kt">esp_https_ota_config_t</span> <span class="n">ota_config</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="n">http_config</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">config</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="kt">esp_err_t</span> <span class="n">ret</span> <span class="o">=</span> <span class="nf">esp_https_ota</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ota_config</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">==</span> <span class="n">ESP_OK</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">esp_restart</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ESP_FAIL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">ESP_OK</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>This code downloads a new firmware image and, if successful, restarts the device to boot into the new firmware. For more advanced usage, refer to the <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/system/ota.html" target="_blank">ESP-IDF OTA documentation</a>.</p>

<h4 class="relative group">OTA partition table layout 
    <div id="ota-partition-table-layout" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#ota-partition-table-layout" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>OTA requires a specific partition table layout. At minimum, you need:</p>
<ul>
<li><strong>NVS partition:</strong> For non-volatile storage.</li>
<li><strong><code>otadata</code> partition:</strong> To track which firmware partition is active.</li>
<li><strong>Two OTA app partitions:</strong> For active/passive firmware images.</li>
</ul>
<p>An example of valid partition table is the following.</p>
<pre tabindex="0"><code>Name,   Type, SubType, Offset,  Size, Flags
nvs,      data, nvs,     ,        0x6000,
otadata,  data, ota,     ,        0x2000,
phy_init, data, phy,     ,        0x1000,
ota_0,    app,  ota_0,   ,        1M,
ota_1,    app,  ota_1,   ,        1M,
</code></pre><p>This layout ensures safe updates: the new firmware is written to the inactive partition, and only after verification is it marked as active for the next boot. The OTA data partition is two flash sectors (0x2000 bytes) to prevent corruption in case of power failure during updates.</p>
<p>Besides the already mentioned (<code>data</code>,<code>nvs</code>), this partition table contains a (<code>data</code>,<code>ota</code>) field which plays an important role in OTA updates.</p>

<h4 class="relative group">otadata partition 
    <div id="otadata-partition" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#otadata-partition" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>The <strong>otadata partition</strong> is a special partition in the ESP-IDF partition table, required for projects that use Over-The-Air (OTA) firmware updates. Its main purpose is to store information about which OTA app slot (such as <code>ota_0</code> or <code>ota_1</code>) should be booted by the device. It&rsquo;s typical size is <code>0x2000</code> bytes (two flash sectors)</p>
<p>The otadata partition is used as follows:</p>
<ul>
<li>On first boot (or after erasing), the otadata partition is empty (all bytes set to 0xFF). In this state, the bootloader will boot the factory app if present, or the first OTA slot if not.</li>
<li>After a successful OTA update, the otadata partition is updated to indicate which OTA app slot should be booted next.</li>
<li>The partition is designed to be robust against power failures: it uses two sectors, and a counter field to determine the most recent valid data if the sectors disagree.</li>
</ul>

<h2 class="relative group">Flash encryption 
    <div id="flash-encryption" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#flash-encryption" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Flash encryption is a critical security feature, designed to protect the contents of flash memory. When enabled, all data stored in flash is encrypted, making it extremely difficult for unauthorized parties to extract sensitive information, even if they have physical access to the device.</p>

<h3 class="relative group">How Flash Encryption Works 
    <div id="how-flash-encryption-works" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#how-flash-encryption-works" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>On first boot, firmware is flashed as plaintext and then encrypted in place. The encryption process uses hardware-accelerated algorithms such as XTS-AES-128, XTS-AES-256, or AES-256, depending on the chip series. The encryption key is securely stored in eFuse blocks within the chip and is not accessible by software, ensuring robust key protection.</p>
<p>Flash access is transparent: any memory-mapped region is automatically decrypted when read, and encrypted when written, without requiring changes to application code.</p>
<p>By default, critical partitions such as the bootloader, partition table, NVS key partition, otadata, and all application partitions are encrypted. Other partitions can be selectively encrypted by marking them with the <code>encrypted</code> flag in the partition table.</p>

<h3 class="relative group">Development mode and release mode 
    <div id="development-mode-and-release-mode" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#development-mode-and-release-mode" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>Flash encryption can be enabled in &ldquo;Development&rdquo; or &ldquo;Release&rdquo; mode.</p>
<ul>
<li>In <strong>development mode</strong>, it is possible to re-flash plaintext firmware for testing, but this is not secure for production.</li>
<li>In <strong>release mode</strong>, re-flashing plaintext firmware is prevented, and the device is locked down for maximum security.</li>
</ul>
<p>It is strongly recommended to use release mode for production devices to prevent unauthorized firmware extraction or modification.</p>

<h3 class="relative group">Important usage notes 
    <div id="important-usage-notes" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#important-usage-notes" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<ul>
<li>Do not interrupt power during the initial encryption pass on first boot, as this can corrupt flash contents and require re-flashing.</li>
<li>Enabling flash encryption increases the bootloader size, which may require updating the partition table offset. We&rsquo;ll see it in detail in <a href="../assignment-4-3">assignment 4.3</a></li>
</ul>

<h2 class="relative group">Secure Bootloader 
    <div id="secure-bootloader" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#secure-bootloader" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Espressif devices offer a feature called <strong>Secure Boot</strong>, which is implemented via a secure bootloader. This mechanism forms the foundation of device security, protecting against unauthorized code execution and firmware tampering.</p>
<p>A <strong>secure bootloader</strong> is a special program that verifies the authenticity and integrity of the firmware before allowing it to run on the device. It does this by checking cryptographic signatures appended to the bootloader and application images. If any part of the code has been altered or is not signed by a trusted key, the device will refuse to execute it.</p>
<p>This process establishes a <strong>chain of trust</strong>:</p>
<ul>
<li>The hardware (ROM bootloader) verifies the software bootloader.</li>
<li>The software bootloader then verifies the application firmware.</li>
</ul>
<p>This ensures that only code signed by the device manufacturer (or another trusted entity) can run, protecting against malware, unauthorized updates, and physical tampering with the device&rsquo;s flash memory. The private signing key is kept secret, while the public key or its digest is stored securely in the device&rsquo;s eFUSE memory, making it inaccessible to software and attackers.</p>

<h3 class="relative group">How to Use Secure Bootloader 
    <div id="how-to-use-secure-bootloader" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#how-to-use-secure-bootloader" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>Enabling secure bootloader on Espressif devices involves the following steps</p>
<ol>
<li>
<p><strong>Enable Secure Boot in Configuration:</strong></p>
<ul>
<li>Use <code>menuconfig</code> to enable secure boot under &ldquo;Security Features&rdquo;.</li>
</ul>
</li>
<li>
<p><strong>Generate or Specify a Signing Key:</strong></p>
<ul>
<li>If a signing key does not exist, generate one using the provided command (e.g., <code>idf.py secure-generate-signing-key</code>). For production, generate keys using a trusted tool like OpenSSL.</li>
</ul>
</li>
<li>
<p><strong>Build and Flash the Bootloader:</strong></p>
<ul>
<li>Build the secure boot-enabled bootloader:
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">idf.py bootloader
</span></span></code></pre></div></li>
<li>Flash the bootloader manually using the command printed by the build process.</li>
</ul>
</li>
<li>
<p><strong>Build and Flash the Application:</strong></p>
<ul>
<li>Build and flash the application and partition table:
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">idf.py flash
</span></span></code></pre></div></li>
<li>The application image will be signed automatically using the specified key.</li>
</ul>
</li>
<li>
<p><strong>Verify Secure Boot Activation:</strong></p>
<ul>
<li>On first boot, the device will enable secure boot, burn the necessary eFUSEs, and verify the signatures. Monitor the serial output to confirm successful activation.</li>
</ul>
</li>
</ol>

  
  
  
  



<div
  
    class="flex px-4 py-3 rounded-md"
    style="background-color: #edcea3"
  >

  <span
    
      class="ltr:pr-3 rtl:pl-3 flex items-center"
      style="color: #df8e1d"
    >

    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>

  </span>


  </span>

  <span
    
      class="dark:text-neutral-300"
    >Once secure boot is enabled, the bootloader cannot be reflashed (unless using a special &ldquo;reflashable&rdquo; mode, which is not recommended for production). Always keep your private signing key secure, as its compromise undermines the entire secure boot process</span>
</div>

<!-- We will trye the secure bootloader in the [Assignment 4.4](assignment-4-3) -->

<h2 class="relative group">Conclusion 
    <div id="conclusion" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#conclusion" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>In this article, we explored three foundational pillars of modern IoT security: OTA updates, flash encryption, and secure bootloaders. Together, these features ensure that devices can be updated securely, protect sensitive data at rest, and verify firmware integrity from the moment they power on. As IoT security requirements continue to evolve, mastering these tools is essential for building resilient and regulation-compliant embedded systems.
In the next assignments, you will test these features first-hand.</p>
<blockquote>
<p>Next step: <a href="../assignment-4-1/">Assignment 4.1</a></p></blockquote>
<blockquote>
<p>Or <a href="../#agenda">go back to navigation menu</a></p></blockquote>

        </div>
        


        
          
        

        


<h2 class="mt-8 text-2xl font-extrabold mb-10">Related</h2>
<section class="w-full grid gap-4 sm:grid-cols-2 md:grid-cols-3">
  
  

  <a href="/workshop-esp-idf/workshops/esp-idf-advanced/lecture-1/" class="min-w-full">
    
    <div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative">

      

      <div class="px-6 py-4">

        
        <div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral"
          href="/workshop-esp-idf/workshops/esp-idf-advanced/lecture-1/">ESP-IDF Adv. - Lecture 1</div>
        

        <div class="text-sm text-neutral-500 dark:text-neutral-400">
          

















  













<div class="flex flex-row flex-wrap items-center">
  
  
  <span title="Reading time">8 mins</span>
  

  
  
</div>





<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</div>







        </div>

        
        <div class="py-1 prose dark:prose-invert">
          In this lecture, we explore the ESP-IDF build system, built on CMake and Ninja. We focus on modular components, the Component Manager, and Board Support Packages (BSPs) for hardware abstraction. We also cover how to create custom components and manage configurations using sdkconfig files and build profiles, enabling flexible and reproducible builds.
        </div>
        
      </div>
      <div class="px-6 pt-4 pb-2">

      </div>
    </div>
  </a>
  
  

  <a href="/workshop-esp-idf/workshops/esp-idf-advanced/lecture-2/" class="min-w-full">
    
    <div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative">

      

      <div class="px-6 py-4">

        
        <div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral"
          href="/workshop-esp-idf/workshops/esp-idf-advanced/lecture-2/">ESP-IDF Adv. - Lecture 2</div>
        

        <div class="text-sm text-neutral-500 dark:text-neutral-400">
          

















  













<div class="flex flex-row flex-wrap items-center">
  
  
  <span title="Reading time">5 mins</span>
  

  
  
</div>





<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</div>







        </div>

        
        <div class="py-1 prose dark:prose-invert">
          In this article, we explore the event loop—a core component of Espressif&rsquo;s ESP-IDF framework that facilitates efficient, decoupled, and asynchronous event handling in embedded applications. We examine its functionality, highlight its benefits, explain how it is used by default within ESP-IDF, and provide practical code examples to demonstrate common usage patterns.
        </div>
        
      </div>
      <div class="px-6 pt-4 pb-2">

      </div>
    </div>
  </a>
  
  

  <a href="/workshop-esp-idf/workshops/esp-idf-advanced/lecture-3/" class="min-w-full">
    
    <div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative">

      

      <div class="px-6 py-4">

        
        <div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral"
          href="/workshop-esp-idf/workshops/esp-idf-advanced/lecture-3/">ESP-IDF Adv. - Lecture 3</div>
        

        <div class="text-sm text-neutral-500 dark:text-neutral-400">
          

















  













<div class="flex flex-row flex-wrap items-center">
  
  
  <span title="Reading time">3 mins</span>
  

  
  
</div>





<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</div>







        </div>

        
        <div class="py-1 prose dark:prose-invert">
          In this article, we cover size analysis and core dumps. You’ll learn what they do, why they matter, and how to use them to build more efficient and reliable applications.
        </div>
        
      </div>
      <div class="px-6 pt-4 pb-2">

      </div>
    </div>
  </a>
  
</section>


      </div>

    
     <script>
        var oid = "views_workshops\/esp-idf-advanced\/lecture-4\/index.md"
        var oid_likes = "likes_workshops\/esp-idf-advanced\/lecture-4\/index.md"
      </script>
      
      
      
      <script type="text/javascript" src="/workshop-esp-idf/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js" integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q&#43;oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script>

    </section>
  <footer class="pt-8 max-w-prose print:hidden">

    
  
    
    
    
      
      
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="flex group mr-3" href="/workshop-esp-idf/workshops/esp-idf-advanced/lecture-3/">
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >ESP-IDF Adv. - Lecture 3</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
        </span>
      </div>
    </div>
  



    

    

  </footer>
</article>

          <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top" title="Scroll to top">
    &uarr;
  </a>
</div>
        </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
    <nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400">
      <ul class="flex flex-col list-none sm:flex-row">
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="/workshop-esp-idf/tags/"
            title="Tags">
            
            Tags
          </a>
        </li>
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="/workshop-esp-idf/authors/"
            title="Developer Portal Authors">
            
            Authors
          </a>
        </li>
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=""
            title="">
            
            About
          </a>
        </li>
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=""
            title="">
            
            Contribute
          </a>
        </li>
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="https://github.com/espressif/developer-portal/"
            title="">
            
            <span >
                

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>


            </span>
            
            
          </a>
        </li>
        
      </ul>
    </nav>
    
  
  <div class="flex items-center justify-between">

    
    
    <p class="text-sm text-neutral-500 dark:text-neutral-500">
      &copy;
      2025
      John Lee
    </p>
    

    
    
    <p class="text-xs text-neutral-500 dark:text-neutral-400">
      
      
      Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
    </p>
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script>
  
  
  <script type="text/javascript" src="/workshop-esp-idf/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js" integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="https://fbez.github.io/workshop-esp-idf/"
  style="z-index:500"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)"
      >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

      </div>

    </div> 

    <script
      async
      src="https://widget.kapa.ai/kapa-widget.bundle.js"
      data-website-id="10bca275-31d7-43dc-a7d7-160913512ad4"
      data-project-name="Developer Portal"
      data-project-color="#38393a"
      data-project-logo="/workshop-esp-idf/logo-ai.webp"
      data-button-image="/workshop-esp-idf/logo-ai-new.webp"
      data-modal-disclaimer="This custom large language model (LLM), trained on official documentation from espressif.com, is designed to provide technical support and answers related to Espressif’s products and services. Give it a try, share your thoughts, and let us know your feedback—we truly appreciate it! 
\n\n*Note*: AI-generated information may be incomplete or inaccurate. Always verify critical information with official sources."
      data-modal-example-questions="How do I put an ESP32-DevkitC into download mode?"
      data-button-text-font-size="0px"
      data-button-border-radius="50%"
      data-button-bg-color="#38393a"
      data-button-border="#38393a"
      data-button-height="52px"
      data-button-width="52px"
      data-button-animation-enabled="false"
      data-button-image-height="100%"
      data-button-image-width="100%"
      data-button-padding="0"
      data-button-hover-animation-enabled="false"
      data-button-position-right="16px"
      data-button-position-bottom="96px"
      data-button-box-shadow="0px 6px 12px 1px rgba(0,0,0,0.16)"
      data-bot-protection-mechanism="hcaptcha"
    ></script>
  </body>
</html>
